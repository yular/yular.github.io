<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8" />
  
  <title>Seite 2 | YBC HomePage</title>
  <meta name="author" content="BaiChuan Yang" />

  
  <meta name="description" content="Blog mainly about IT technology and Interesting Life Events~" />
  

  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

  
  <meta property="og:site_name" content="YBC HomePage" />

  <meta name="google-site-verification" content="IK-tjIwORWUinhhD-XZkyX5FWQgd568VBgmJorjK7Bg" />
  <meta name="baidu-site-verification" content="iAx4x1uv2O" />
  <meta name="msvalidate.01" content="E6F8036020E5423AA7576A75B806937B" />  

  
    <meta property="og:image" content="undefined" />
  

  
  <link href="/css/images/favicon.ico" rel="icon" />
  

  <link rel="alternate" href="/atom.xml" title="YBC HomePage" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-63602183-1', 'auto');
	ga('send', 'pageview');

</script>



  <!-- baidu webmaster push -->
  <script src='//push.zhanzhang.baidu.com/push.js'></script>
</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">YBC HomePage</a></h1>
  <h2><a href="/">Study~ Work~ Life~ Everything is here~</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
      <li><a href="/about">About</a></li>
    
      <li><a href="/atom.xml">RSS</a></li>
    
      <li><a href="/sitemap.xml">SiteMap</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
  
  _st('install','xeEkJ65dmswemsvZM1Nx','2.0.0');
</script>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2017-10-02T06:18:39.000Z"><a href="/2017/10/01/Reading-Note-of-Effective-Java-VII/">2017-10-01</a></time>
      
      
  
    <h1 class="title"><a href="/2017/10/01/Reading-Note-of-Effective-Java-VII/">Reading Note of Effective Java VII</a></h1>
  

    </header>
    <div class="entry">
      
      
        <h3 id="Item-63-Include-failure-capture-information-in-detail-message"><a href="#Item-63-Include-failure-capture-information-in-detail-message" class="headerlink" title="Item 63. Include failure-capture information in detail message"></a>Item 63. Include failure-capture information in detail message</h3><p>To capture the failure, the detail message of an exception should contain the values of all parameters and fields that contributed to the exception.</p>
<hr>

<h3 id="Item-64-Strive-for-failure-atomicity"><a href="#Item-64-Strive-for-failure-atomicity" class="headerlink" title="Item 64. Strive for failure atomicity"></a>Item 64. Strive for failure atomicity</h3><p>A failed method invocation should leave the object in the state that it was in prior to the invocation.</p>
<hr>

<h3 id="Item-65-Do-not-ignore-exceptions"><a href="#Item-65-Do-not-ignore-exceptions" class="headerlink" title="Item 65. Do not ignore exceptions"></a>Item 65. Do not ignore exceptions</h3><p>At the very least, the catch block (empty one) should contain a comment explaining why it is appropriate to ignore the exception.</p>
<hr>

<h3 id="Item-66-Synchronize-access-to-shared-mutable-data"><a href="#Item-66-Synchronize-access-to-shared-mutable-data" class="headerlink" title="Item 66. Synchronize access to shared mutable data"></a>Item 66. Synchronize access to shared mutable data</h3><p>When multiple threads share mutable data, each thread that reads or writes the data must perform synchronization.</p>
<p>Do not use <code>Thread.stop</code>.</p>
<hr>

<h3 id="Item-67-Avoid-excessive-synchronization"><a href="#Item-67-Avoid-excessive-synchronization" class="headerlink" title="Item 67. Avoid excessive synchronization"></a>Item 67. Avoid excessive synchronization</h3><p>To avoid liveness and safety failures, never cede control to the client within a synchronized method or block.</p>
<p>Do as little work as possible inside synchronized regions.</p>
<hr>

<h3 id="Item-68-Prefer-executors-and-tasks-to-threads"><a href="#Item-68-Prefer-executors-and-tasks-to-threads" class="headerlink" title="Item 68. Prefer executors and tasks to threads"></a>Item 68. Prefer executors and tasks to threads</h3><hr>

<h3 id="Item-69-Prefer-concurrency-utilities-to-wait-and-notify"><a href="#Item-69-Prefer-concurrency-utilities-to-wait-and-notify" class="headerlink" title="Item 69. Prefer concurrency utilities to wait and notify"></a>Item 69. Prefer concurrency utilities to wait and notify</h3><p>Here are some rules:</p>
<ul>
<li>Use <code>ConcurrentHashMap</code> in preference to <code>Collections.synchronizeMap</code> or <code>Hashtable</code>.</li>
<li>For interval timing, always use System.nanoTime in preference to System.currentTimeMillis.</li>
<li>Always use wait loop idiom to invoke the wait method; never invoke it outside of a loop.</li>
</ul>
<hr>

<h3 id="Item-70-Document-thread-safety"><a href="#Item-70-Document-thread-safety" class="headerlink" title="Item 70. Document thread safety"></a>Item 70. Document thread safety</h3><p>To enable safe concurrent use, a class must clearly document what level of thread safety it supports:</p>
<ul>
<li>immutable</li>
<li>unconditionally thread-safe: instances are mutable but the class has sufficient internal synchronization.</li>
<li>conditionally thread-safe: like unconditionally thread-safe, but some methods require external synchronization.</li>
<li>not thread-safe</li>
<li>thread-hostile</li>
</ul>
<p>If write an unconditionally thread-safe class, consider using a private lock object in place of synchronized methods.</p>
<hr>

<h3 id="Item-71-Use-lazy-initialization-judiciously"><a href="#Item-71-Use-lazy-initialization-judiciously" class="headerlink" title="Item 71. Use lazy initialization judiciously"></a>Item 71. Use lazy initialization judiciously</h3><p>Under most circumstances, normal initialization is preferable to lazy initialization.</p>
<p>Here are the rules:</p>
<ul>
<li>To use lazy initialization for a static field, use the lazy initialization holder for class idiom.</li>
<li>To use lazy initialization for an instance field, use the double-check idiom, which is that once without locking, and then if the field appears to be uninitialized, a second time with locking.</li>
</ul>
<hr>

<h3 id="Item-72-Do-not-depend-on-the-thread-scheduler"><a href="#Item-72-Do-not-depend-on-the-thread-scheduler" class="headerlink" title="Item 72. Do not depend on the thread scheduler"></a>Item 72. Do not depend on the thread scheduler</h3><p>Here are the rules:</p>
<ul>
<li>Do not fix the program by putting in calls to <code>Thread.yield</code>.</li>
<li>Thread priorities are the least portable features of Java platform.</li>
</ul>
<hr>

<h3 id="Item-73-Avoid-thread-groups"><a href="#Item-73-Avoid-thread-groups" class="headerlink" title="Item 73. Avoid thread groups"></a>Item 73. Avoid thread groups</h3><p>Thread groups are obsolete.</p>
<hr>

<h3 id="Item-74-Implement-Serializable-judiciously"><a href="#Item-74-Implement-Serializable-judiciously" class="headerlink" title="Item 74. Implement Serializable judiciously"></a>Item 74. Implement Serializable judiciously</h3><p>Here are the reasons and rules:</p>
<ul>
<li>Implementing Serializable decreases the flexibility to change a class’s implementation once it has been released.</li>
<li>Implementing Serializable increases the likelihood of bugs and security holes.</li>
<li>Implementing Serializable increases the testing burden associated with releasing a new version of a class.</li>
<li>Classes designed for inheritance should rarely implement Serializable, and interfaces should rarely extend it. Provide a parameterless constructor on nonserializable classes designed for inheritance.</li>
<li>Inner class should not implement Serializable.</li>
</ul>
<hr>

<h3 id="Item-75-Consider-using-a-custom-serialized-form"><a href="#Item-75-Consider-using-a-custom-serialized-form" class="headerlink" title="Item 75. Consider using a custom serialized form"></a>Item 75. Consider using a custom serialized form</h3><p>The default serialized form is likely to be appropriate if an object’s physical representation is identical to its logical content.<br>Often must provide a <code>readObject</code> method to ensure invariants and security when use default serialized form.</p>
<p>The disadvantages of using default serialized form when an object’s physical representation differs substantially from its logical data content:</p>
<ul>
<li>It permanetly ties the exported API to the current internal repesentation.</li>
<li>It can consume excessive space.</li>
<li>It can consume excessive time.</li>
<li>It can cause stack overflows.</li>
</ul>
<p>If all instance fields are transient, it is technically permissible to dispense with invoking <code>defaultWriteObject</code> and <code>defaultReadObject</code> but it is not recommended.</p>
<p>Must impose any synchronization on object serialization that would impose on any other method that reads the entire state of the object.</p>
<p>Regardless of what serialized form choosed, decalre an explicit serial verison UID in every serializable class.</p>
<h3 id="Item-76-Write-readObject-methods-defensively"><a href="#Item-76-Write-readObject-methods-defensively" class="headerlink" title="Item 76. Write readObject methods defensively"></a>Item 76. Write readObject methods defensively</h3><p>When an object is deserialized, it is critical to defensively copy any field containing an object references that a client must not posses.</p>
<p>Do not use the <code>writeUnshared</code> and <code>readUnshared</code> methods.</p>
<hr>

<h3 id="Item-77-For-instance-control-prefer-enum-type-to-readResolve"><a href="#Item-77-For-instance-control-prefer-enum-type-to-readResolve" class="headerlink" title="Item 77. For instance control, prefer enum type to readResolve"></a>Item 77. For instance control, prefer enum type to readResolve</h3><p>If depend on readResolve for instance control, all instances fields with object reference types must be declared transient.</p>
<hr>

<h3 id="Item-78-Consider-serialization-proxies-instead-of-serialized-instances"><a href="#Item-78-Consider-serialization-proxies-instead-of-serialized-instances" class="headerlink" title="Item 78. Consider serialization proxies instead of serialized instances"></a>Item 78. Consider serialization proxies instead of serialized instances</h3>
      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">Share</a>
        </div>
        
        
  
  <div class="tags">
    <a href="/tags/Java/">Java</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>






  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2017-10-02T05:20:52.000Z"><a href="/2017/10/01/Reading-Note-of-Effective-Java-VI/">2017-10-01</a></time>
      
      
  
    <h1 class="title"><a href="/2017/10/01/Reading-Note-of-Effective-Java-VI/">Reading Note of Effective Java VI</a></h1>
  

    </header>
    <div class="entry">
      
      
        <h3 id="Item-51-Beware-of-performance-of-string-concatenation"><a href="#Item-51-Beware-of-performance-of-string-concatenation" class="headerlink" title="Item 51. Beware of performance of string concatenation"></a>Item 51. Beware of performance of string concatenation</h3><p>To achieve acceptable performance, use a StringBuilder in place of a String.</p>
<hr>

<h3 id="Item-52-Refer-to-objects-by-their-interfaces"><a href="#Item-52-Refer-to-objects-by-their-interfaces" class="headerlink" title="Item 52. Refer to objects by their interfaces"></a>Item 52. Refer to objects by their interfaces</h3><p>If appropriate interface types exist, then parameters, return values, vraibales, and fields should all be declared using interface types.</p>
<hr>

<h3 id="Item-53-Prefer-interfaces-to-reflection"><a href="#Item-53-Prefer-interfaces-to-reflection" class="headerlink" title="Item 53. Prefer interfaces to reflection"></a>Item 53. Prefer interfaces to reflection</h3><p>As a rule, objects should not be accesed reflectively in normal applications at runtime.</p>
<ul>
<li>Lose all the benefits of compile-time type checking.</li>
<li>The code required to perform reflective access is clumsy and verbose.</li>
<li>Performance suffers.</li>
</ul>
<hr>

<h3 id="Item-54-Use-native-methods-judiciously"><a href="#Item-54-Use-native-methods-judiciously" class="headerlink" title="Item 54. Use native methods judiciously"></a>Item 54. Use native methods judiciously</h3><p>Java Native Interface (JNI) allows Java applications to call native methods, which are special methods written in native programming languages such as C or C++.</p>
<hr>

<h3 id="Item-55-Optimize-judiciously"><a href="#Item-55-Optimize-judiciously" class="headerlink" title="Item 55. Optimize judiciously"></a>Item 55. Optimize judiciously</h3><p>Here are the rules:</p>
<ul>
<li>Strive to write good programs rather than fast ones.</li>
<li>Strive to aovid design decisions that limit performance.</li>
<li>Consider the performance consequences of API design decisions.</li>
<li>Measure performance before and after each attempted optimization.</li>
</ul>
<hr>

<h3 id="Item-56-Adhere-to-generally-accepted-naming-conventions"><a href="#Item-56-Adhere-to-generally-accepted-naming-conventions" class="headerlink" title="Item 56. Adhere to generally accepted naming conventions"></a>Item 56. Adhere to generally accepted naming conventions</h3><hr>

<h3 id="Item-57-Use-exceptions-only-for-exceptional-conditions"><a href="#Item-57-Use-exceptions-only-for-exceptional-conditions" class="headerlink" title="Item 57. Use exceptions only for exceptional conditions"></a>Item 57. Use exceptions only for exceptional conditions</h3><p>Never use exceptions for ordinary control flow. And good APIs must not enforce users to do that.</p>
<hr>

<h3 id="Item-58-Use-checked-exception-for-recoverable-conditions-and-runtime-exceptions-for-programming-errors"><a href="#Item-58-Use-checked-exception-for-recoverable-conditions-and-runtime-exceptions-for-programming-errors" class="headerlink" title="Item 58. Use checked exception for recoverable conditions and runtime exceptions for programming errors"></a>Item 58. Use checked exception for recoverable conditions and runtime exceptions for programming errors</h3><p>Exceptions which are subclass of Exception, are recoverable. Exceptions which are subclass of Error, are unrecoverable.</p>
<p>RuntimeException is unchecked exception. Thus, all of the unchecked throwables implemented should subclass RuntimeException.</p>
<hr>

<h3 id="Item-59-Avoid-unnecessary-use-of-checked-exceptions"><a href="#Item-59-Avoid-unnecessary-use-of-checked-exceptions" class="headerlink" title="Item 59. Avoid unnecessary use of checked exceptions"></a>Item 59. Avoid unnecessary use of checked exceptions</h3><hr>

<h3 id="Item-60-Favor-the-use-of-standard-exceptions"><a href="#Item-60-Favor-the-use-of-standard-exceptions" class="headerlink" title="Item 60. Favor the use of standard exceptions"></a>Item 60. Favor the use of standard exceptions</h3><p>Java 7 and 8: Use try-with-resources (TWR) in IO operation to take care of resources management. TWR uses a new interface called <code>AutoCloseable</code>.</p>
<hr>

<h3 id="Item-61-Throw-exceptions-appropriate-to-the-abstraction"><a href="#Item-61-Throw-exceptions-appropriate-to-the-abstraction" class="headerlink" title="Item 61. Throw exceptions appropriate to the abstraction"></a>Item 61. Throw exceptions appropriate to the abstraction</h3><p>Higher layers catch low-level exceptions and, in their place, throw exceptions that can be explained in terms of the high-level abstraction.</p>
<p>While exception translation is superior to mindless propagation of exceptions from lower layers, it should not be overused.</p>
<hr>

<h3 id="Item-62-Document-all-exceptions-thrown-by-each-method"><a href="#Item-62-Document-all-exceptions-thrown-by-each-method" class="headerlink" title="Item 62. Document all exceptions thrown by each method"></a>Item 62. Document all exceptions thrown by each method</h3><p>Always declare checked exceptions individually, and document precisely the conditions under which each one is thrown using the Javadoc <code>@throws</code> tag.</p>
<p>Use the Javadoc <code>@throws</code> tag to document each unchecked exception that a method can throw, but do not use the throws keyword to include unchecked exceptions in the method declaration.</p>
<p>If an exception is thrown by many methods in a class for the same reason, it is acceptable to document the exception in the class’s documentation comment.</p>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">Share</a>
        </div>
        
        
  
  <div class="tags">
    <a href="/tags/Java/">Java</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>






  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2017-10-02T05:02:21.000Z"><a href="/2017/10/01/Reading-Note-of-Effective-Java-V/">2017-10-01</a></time>
      
      
  
    <h1 class="title"><a href="/2017/10/01/Reading-Note-of-Effective-Java-V/">Reading Note of Effective Java V</a></h1>
  

    </header>
    <div class="entry">
      
      
        <h3 id="Item-41-Use-overloading-judiciously"><a href="#Item-41-Use-overloading-judiciously" class="headerlink" title="Item 41. Use overloading judiciously"></a>Item 41. Use overloading judiciously</h3><p>A safe and conservative policy is never to export two overloadings with the same number of parameters.</p>
<hr>

<h3 id="Item-42-Use-varargs-judiciously"><a href="#Item-42-Use-varargs-judiciously" class="headerlink" title="Item 42. Use varargs judiciously"></a>Item 42. Use varargs judiciously</h3><p>Use varargs only when a call really operates on a variable-length sequence of values.</p>
<hr>

<h3 id="Item-43-Return-empty-arrays-or-collections-not-nulls"><a href="#Item-43-Return-empty-arrays-or-collections-not-nulls" class="headerlink" title="Item 43. Return empty arrays or collections, not nulls"></a>Item 43. Return empty arrays or collections, not nulls</h3><hr>

<h3 id="Item-44-Write-doc-comments-for-all-exposed-API-elements"><a href="#Item-44-Write-doc-comments-for-all-exposed-API-elements" class="headerlink" title="Item 44. Write doc comments for all exposed API elements"></a>Item 44. Write doc comments for all exposed API elements</h3><p>Here are the rules:</p>
<ul>
<li>To document API properly, must precede every exported class, interface, constructor, method and field declaration with a doc comment.</li>
<li>The doc comment for a method should describe succinctly the contract between the method and its client.</li>
<li>No longer necessary to use the HTML <code>&lt;code&gt;</code> or <code>&lt;tt&gt;</code> tages in doc comments: the Javadoc {@code} tag is preferable because it eliminates the need to escape HTML metacharacters.</li>
<li>To document a generic type or method, be sure to document all type parameters.</li>
<li>To document an enum type, be sure to document the constants.</li>
<li>To document an annotation type, be sure to document any members as well as type itself.</li>
</ul>
<hr>

<h3 id="Item-45-Minimize-the-scope-of-local-variables"><a href="#Item-45-Minimize-the-scope-of-local-variables" class="headerlink" title="Item 45. Minimize the scope of local variables"></a>Item 45. Minimize the scope of local variables</h3><p>Declare the local variables where they are first used. And the declaration should contain an initializer.</p>
<p>Keep methods small and focused.</p>
<hr>

<h3 id="Item-46-Prefer-for-each-loops-to-traditional-for-loops"><a href="#Item-46-Prefer-for-each-loops-to-traditional-for-loops" class="headerlink" title="Item 46. Prefer for-each loops to traditional for loops"></a>Item 46. Prefer for-each loops to traditional for loops</h3><p>Three situations where for-each loop should not be used:</p>
<ul>
<li>Filtering</li>
<li>Transforming</li>
<li>Parallel iteration</li>
</ul>
<hr>

<h3 id="Item-47-Know-and-use-libraries"><a href="#Item-47-Know-and-use-libraries" class="headerlink" title="Item 47. Know and use libraries"></a>Item 47. Know and use libraries</h3><hr>

<h3 id="Item-48-Avoid-float-and-double-if-exact-answers-are-required"><a href="#Item-48-Avoid-float-and-double-if-exact-answers-are-required" class="headerlink" title="Item 48. Avoid float and double if exact answers are required"></a>Item 48. Avoid float and double if exact answers are required</h3><hr>

<h3 id="Item-49-Prefer-primitive-types-to-boxed-primitives"><a href="#Item-49-Prefer-primitive-types-to-boxed-primitives" class="headerlink" title="Item 49. Prefer primitive types to boxed primitives"></a>Item 49. Prefer primitive types to boxed primitives</h3><p>Autoboxing reduces the verbosity but not the danger of using boxed primitives.</p>
<hr>

<h3 id="Item-50-Avoid-strings-where-other-types-are-more-appropriate"><a href="#Item-50-Avoid-strings-where-other-types-are-more-appropriate" class="headerlink" title="Item 50. Avoid strings where other types are more appropriate"></a>Item 50. Avoid strings where other types are more appropriate</h3><p>Strings are poor substitutes for other value types.</p>
<ul>
<li>Poor substitutes for enum types.</li>
<li>Poor substitutes for aggregate types.</li>
<li><ul>
<li>Poor substitutes for capabilities.</li>
</ul>
</li>
</ul>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">Share</a>
        </div>
        
        
  
  <div class="tags">
    <a href="/tags/Java/">Java</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>






  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2017-10-02T04:34:37.000Z"><a href="/2017/10/01/Reading-Note-of-Effective-Java-IV/">2017-10-01</a></time>
      
      
  
    <h1 class="title"><a href="/2017/10/01/Reading-Note-of-Effective-Java-IV/">Reading Note of Effective Java IV</a></h1>
  

    </header>
    <div class="entry">
      
      
        <h3 id="Item-31-Use-instance-fields-instead-of-ordinals"><a href="#Item-31-Use-instance-fields-instead-of-ordinals" class="headerlink" title="Item 31. Use instance fields instead of ordinals"></a>Item 31. Use instance fields instead of ordinals</h3><p>All enums have an ordinal method returning the numerical position of each enum constant in its type.</p>
<p>Never derive a value associated with an enum from its ordinal; store it in an instance field instead.</p>
<hr>

<h3 id="Item-32-Use-EnumSet-instead-of-bit-fields"><a href="#Item-32-Use-EnumSet-instead-of-bit-fields" class="headerlink" title="Item 32. Use EnumSet instead of bit fields"></a>Item 32. Use EnumSet instead of bit fields</h3><p>Especially an enum type will be used in sets</p>
<hr>

<h3 id="Item-33-Use-EnumMap-instead-of-ordinal-indexing"><a href="#Item-33-Use-EnumMap-instead-of-ordinal-indexing" class="headerlink" title="Item 33. Use EnumMap instead of ordinal indexing"></a>Item 33. Use EnumMap instead of ordinal indexing</h3><hr>

<h3 id="Item-34-Emulate-extensible-enums-with-interface"><a href="#Item-34-Emulate-extensible-enums-with-interface" class="headerlink" title="Item 34. Emulate extensible enums with interface"></a>Item 34. Emulate extensible enums with interface</h3><p>One compelling use case for extensible enumerated types is operation codes.</p>
<hr>

<h3 id="Item-35-Prefer-annotations-to-naming-patterns"><a href="#Item-35-Prefer-annotations-to-naming-patterns" class="headerlink" title="Item 35. Prefer annotations to naming patterns"></a>Item 35. Prefer annotations to naming patterns</h3><p>All programmers should use predefined annotation types provided by the Java platform.</p>
<hr>

<h3 id="Item-36-Consistently-use-the-Override-annotation"><a href="#Item-36-Consistently-use-the-Override-annotation" class="headerlink" title="Item 36. Consistently use the Override annotation"></a>Item 36. Consistently use the Override annotation</h3><p>Should use the Override annotation on every method declaration that you believe to override a superclass declaration.</p>
<p>One exception is that in concrete classes, need not annotate methods that you believe to override abstract methods declaration.</p>
<hr>

<h3 id="Item-37-Use-marker-interfaces-to-define-types"><a href="#Item-37-Use-marker-interfaces-to-define-types" class="headerlink" title="Item 37. Use marker interfaces to define types"></a>Item 37. Use marker interfaces to define types</h3><p>Advantages of marker interface:</p>
<ul>
<li>Define a type implemented by instances of the marked class but marker annotations do not;</li>
<li>Maker interface can be targeted more precisely and if an annotation type is declared with target ElementType.TYPE, it can be applied to any class or interface.</li>
<li>Must use marker interface if marker only applies to classes and interfaces, or want to write one or more methods accepting only objects having this marking.</li>
<li>If want to limit the use of marker to elements of a particular interface, define the marker as a subinterface of that interface.</li>
</ul>
<p>Advantages of marker annotations over marker interfaces:</p>
<ul>
<li>It is possible to add more information to an annotation type after it is already in use by adding one or more annotation elements with defaults.</li>
<li>Must use an annotation if the marker applies to any program element other than a class or interface.</li>
</ul>
<hr>

<h3 id="Item-38-Check-parameters-for-validity"><a href="#Item-38-Check-parameters-for-validity" class="headerlink" title="Item 38. Check parameters for validity"></a>Item 38. Check parameters for validity</h3><p>For public methods, use Javadoc <code>@throws</code> tag to document the exception that will be thrown if a restriction on parameter values is violated. For nonpublic methods, use assertion to check parameters.</p>
<p>Constructor should check the validity of parameters stored away for later use.</p>
<p>Exception is the case in which the validity check would be expensive or impractical and it is performed implicitly.</p>
<p>Should design methods to be as general as it is practical to make them. The fewer restriction on parameters, the better; Document all the restrictions and enforce them with explicit checks at the beginning of the method body.</p>
<hr>

<h3 id="Item-39-Make-defensive-copies-when-needed"><a href="#Item-39-Make-defensive-copies-when-needed" class="headerlink" title="Item 39. Make defensive copies when needed"></a>Item 39. Make defensive copies when needed</h3><p>Must program defensively with assumption that clients of class will do their best to destroy its invariants.</p>
<hr>

<h3 id="Item-40-Design-method-signatures-carefully"><a href="#Item-40-Design-method-signatures-carefully" class="headerlink" title="Item 40. Design method signatures carefully"></a>Item 40. Design method signatures carefully</h3><p>Here are the rules:</p>
<ul>
<li>Choose method names carefully.</li>
<li>Do not go overboard in providing convenience methods.</li>
<li>Avoid long parameter lists.</li>
<li>For parameter types, favor interfaces over classes.</li>
<li>Prefer two-element enum type to boolean parameters.</li>
</ul>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">Share</a>
        </div>
        
        
  
  <div class="tags">
    <a href="/tags/Java/">Java</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>






  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2017-10-02T00:52:05.000Z"><a href="/2017/10/01/Reading-Note-of-Effective-Java-III/">2017-10-01</a></time>
      
      
  
    <h1 class="title"><a href="/2017/10/01/Reading-Note-of-Effective-Java-III/">Reading Note of Effective Java III</a></h1>
  

    </header>
    <div class="entry">
      
      
        <h3 id="Item-21-Use-function-objects-to-represent-strategies"><a href="#Item-21-Use-function-objects-to-represent-strategies" class="headerlink" title="Item 21. Use function objects to represent strategies"></a>Item 21. Use function objects to represent strategies</h3><p>Strategy pattern is to allow the caller of a function to specialize its behavior by passing in a second function. Function objects are instances of classes implementing interfaces whose methods perform operations on other objects, passed explicitly to that methods. A typical concrete strategy class is stateless, has no fields, and thus all instances are functionally equivalent.</p>
<p>In Java, to implement Strategy pattern, declare an interface to represent the strategy, and a class that implements this interface for each concrete strategy.</p>
<hr>

<h3 id="Item-22-Favor-static-member-classes-over-nonstatic"><a href="#Item-22-Favor-static-member-classes-over-nonstatic" class="headerlink" title="Item 22. Favor static member classes over nonstatic."></a>Item 22. Favor static member classes over nonstatic.</h3><p>Static member clases are kinds of nested class. One common use of a static member class is as a public helper class, useful only in conjunction with its outer class. The association between a nonstatic member class instance and its enclosing instance is established when the former is created, and it cannot be modified thereafter. The association takes up time and space for nonstatic member class construction.</p>
<p>One common use of a nonstatic member class is to define an Adapter allowing an instance of the outer clas to be viewed as an instance of some unrelated class. Each instance of a nonstatic member class is implicitly associated with an enclosing instance of its enclosing class. Within instance methods of a nonstatic member class, can invoke methods on the enclosing instance or obtain a reference to the enclosing instance using the <em> qualified this</em> construct.</p>
<p>If declare a member class does not require access to an enclosing instance, always use static modifier in declaration.</p>
<p>Common use of private static member classe is to reperesent components of the object represented by their enclosing class.</p>
<p>Common use of anonymous classes is to create function objects on the fly, to create process objects, such as Runnable, Thread, or TimerTask instances, and within static factory methods.</p>
<hr>

<h3 id="Item-23-Do-not-use-raw-types-in-new-code"><a href="#Item-23-Do-not-use-raw-types-in-new-code" class="headerlink" title="Item 23. Do not use raw types in new code"></a>Item 23. Do not use raw types in new code</h3><p>A class or interface whose declaration has one or more type parameters is a generic class or interface, and they are called generic types. For example, List<e> is generic type. </e></p>
<p>Each generic type defines a set of parameterized types, which consists of actual type parameters corresponding to the generic type as formal type parameters. For example, List<string>.</string></p>
<p>Each generic type defines a raw type, which is the name of the generic type used without any accompanying actual tpye parameters. For example, List.</p>
<p>It is fine to use types parameterized to allow insertion of arbitrary objects. For example, List<object>.</object></p>
<p>If the element type is unknown and does not matter, use unbounded wildcard types. When use unbouned wilcard types, not only cannot put any element except null into a Collection&lt;?&gt;, but also cannot assume anything about the type of the objects that user get out. For example,Set&lt;?&gt;. To use unbounded wildcard type, do this: <code>Set&lt;?&gt; st = new Set&lt;String&gt;()</code> by specifying a type; otherwise, no element can be inserted to the data collection. If these restrictions are unacceptable, use generic methods or bounded wildcard types.</p>
<p>Two exceptions to the rule of disallowing raw types, both stem from the fact that generic type information is erased at runtime.</p>
<ul>
<li>Must use raw type in class literals. For example, List.class.</li>
<li>The preferred way to use the instanceof operator with generic types is o instanceof Set.</li>
</ul>
<p>Bounded type: exp. <e extends="" number="">.</e></p>
<p>Bounded wildcard type: exp. &lt;? extends Number&gt;</p>
<hr>

<h3 id="Item-24-Eliminate-unchecked-warnings-Ensure-typesafe"><a href="#Item-24-Eliminate-unchecked-warnings-Ensure-typesafe" class="headerlink" title="Item 24. Eliminate unchecked warnings. (Ensure typesafe)"></a>Item 24. Eliminate unchecked warnings. (Ensure typesafe)</h3><p>If cannot eliminate a warning, prove that the code provoking the warning is typesafe, and only then suppress the warning with an <code>@SuppressWarnings(&quot;unchecked&quot;)</code> annotation. And add a comment saying why it is safe to do so.</p>
<p>Always use the Suppress-Warnings annotation on the smallest scope possible.</p>
<hr>

<h3 id="Item-25-Prefer-lists-to-arrays"><a href="#Item-25-Prefer-lists-to-arrays" class="headerlink" title="Item 25. Prefer lists to arrays"></a>Item 25. Prefer lists to arrays</h3><p>Arrays are covariant (if Sub is a subtype of Super, Sub[] is also a subtype of Super[]), and reified (know and enforce element types at runtime). </p>
<p>Generics are invariant and erasure (enforce type constraints only at compile time and discard them at runtime).</p>
<p>Do not mix use generics and arrays. For example, List<string>[].</string></p>
<hr>

<h3 id="Item-26-Favor-generic-types"><a href="#Item-26-Favor-generic-types" class="headerlink" title="Item 26. Favor generic types"></a>Item 26. Favor generic types</h3><hr>

<h3 id="Item-27-Favor-generic-methods"><a href="#Item-27-Favor-generic-methods" class="headerlink" title="Item 27. Favor generic methods"></a>Item 27. Favor generic methods</h3><p>The type parameter list, which declares the type parameter, goes between the method’s modifiers and it’s return type.</p>
<p>Recursive type bound is that a type parameter is bounded by some expression involving that type parameter itself. For example, interface Comparable<t> .</t></p>
<hr>

<h3 id="Item-28-Use-bounded-wildcards-to-increase-API-flexibility"><a href="#Item-28-Use-bounded-wildcards-to-increase-API-flexibility" class="headerlink" title="Item 28. Use bounded wildcards to increase API flexibility"></a>Item 28. Use bounded wildcards to increase API flexibility</h3><p>For maximum flexibility, use wildcard types on input parameters representing producers (extends E) or consumers (super E), which is PECS rule. But do not use wildcard types are return types.</p>
<p>PECS rules: producers-extends, consumers-super. Both Comparable and Comparator are consumer pattern.</p>
<p>Properly used, wildcard types are nearly invisible to users of a class. If the user of a class has to think about wildcard types, there is probably something wrong with the class’s API.</p>
<p>If a type parameter appears once in a method declaration, replace it with a wildcard. Replace unbounded type parameter with unbounded wildcard, and replace bounded type parameter with bounded wildcard.</p>
<hr>

<h3 id="Item-29-Consider-typesafe-heterogeneous-containers"><a href="#Item-29-Consider-typesafe-heterogeneous-containers" class="headerlink" title="Item 29. Consider typesafe heterogeneous containers"></a>Item 29. Consider typesafe heterogeneous containers</h3><p>For example, Map<class<?>, Object&gt; typesafe and all keys are of different types.</class<?></p>
<hr>

<h3 id="Item-30-Use-enums-instead-of-int-constants"><a href="#Item-30-Use-enums-instead-of-int-constants" class="headerlink" title="Item 30. Use enums instead of int constants"></a>Item 30. Use enums instead of int constants</h3><p>To associate data with enum constants, declare instance fields and write a constructor that takes the data and stores it in the fields. If enum is generally useful, it should be a top level class; if its use is tied to a specific top-level class, it should be a member class of the top level class.</p>
<p>Use constants specific method implementation pattern. Can combine with constant-specific data. The disadvantages is to make it harder to share code among enum constants.</p>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">Share</a>
        </div>
        
        
  
  <div class="tags">
    <a href="/tags/Java/">Java</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>






  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2017-09-27T07:51:21.000Z"><a href="/2017/09/27/Reading-Note-of-Effective-Java-II/">2017-09-27</a></time>
      
      
  
    <h1 class="title"><a href="/2017/09/27/Reading-Note-of-Effective-Java-II/">Reading Note of Effective Java II</a></h1>
  

    </header>
    <div class="entry">
      
      
        <h3 id="Item-11-Override-clone-judiciously"><a href="#Item-11-Override-clone-judiciously" class="headerlink" title="Item 11. Override clone judiciously"></a>Item 11. Override clone judiciously</h3><ul>
<li>Clone: creates an object without calling a constructor. x.clone() != x but x.clone().equals(x). But a well-behaved clone method should call constructor.</li>
<li>If override the clone method in a nonfinal class, should return an object obtained by invoking super.clone().</li>
<li>In practice, a class implemeneting Cloneable is expected to provide a properly functioning public clone method.</li>
<li>clone method: never make the client do anything the library can do for the client.</li>
<li>In effect, the clone method functions as another constructor; you must ensure that it does no harm to the original object and that it properly establishes invariants on the clone.</li>
<li>The clone architecture is incompatible with normal use of final fields referring to mutable objects.</li>
<li>Like a constructor, a clone method cannot invoke any nonfinal (overriden) methods on the clone under construction.</li>
<li>A fine approach to object copying is to provide a copy constructor or copy factory.</li>
</ul>
<hr>

<h3 id="Item-12-Consider-implementing-Comparable"><a href="#Item-12-Consider-implementing-Comparable" class="headerlink" title="Item 12. Consider implementing Comparable"></a>Item 12. Consider implementing Comparable</h3><ul>
<li>compareTo contract includes reflexivity, symmetry, and transitivity.</li>
</ul>
<hr>

<h3 id="Item-13-Minimize-the-accessibility-of-classes-and-members"><a href="#Item-13-Minimize-the-accessibility-of-classes-and-members" class="headerlink" title="Item 13. Minimize the accessibility of classes and members"></a>Item 13. Minimize the accessibility of classes and members</h3><ul>
<li>Information hiding: make each class or member as inaccessible as possible.</li>
<li>It is acceptable to make a private member of a public class pack-private to test it, but it is not acceptable to raise the accessibility any higher than that.</li>
</ul>
<hr>

<h3 id="Item-14-In-public-classes-use-accessor-methods-not-public-fields"><a href="#Item-14-In-public-classes-use-accessor-methods-not-public-fields" class="headerlink" title="Item 14. In public classes, use accessor methods, not public fields"></a>Item 14. In public classes, use accessor methods, not public fields</h3><ul>
<li>Classes with public mutable fields are not thread-safe and instance fields should never be public.</li>
<li>Only exception is to expose constants via public static final fields, assuming that the constants form an integral part of the abstractions provided by the class.</li>
<li>In public classes, use accessor methods, not public fields. But if a class is package-private or a private nested class, it is fine to expose its data fields.</li>
</ul>
<hr>

<h3 id="Item-15-Minimize-mutability"><a href="#Item-15-Minimize-mutability" class="headerlink" title="Item 15. Minimize mutability"></a>Item 15. Minimize mutability</h3><p>Five rules to make a class immutable:</p>
<ul>
<li>Do not provide any methods modifying the object’s state.</li>
<li>Ensure that the class cannot be extended.</li>
<li>Make all fields final.</li>
<li>Make all fields private.</li>
<li>Ensure exclusive access to any mutable components.</li>
</ul>
<p>Functional programming approach enables immutability.</p>
<p>Immutable objects are simple, inherently thread-safe, can be shared freely, and require no synchronization.</p>
<p>Classes should be immutable unless there is a very good reason to make them mutable. If a class cannot be made immutable, limit its mutability as much as possible.</p>
<hr>

<h3 id="Item-16-Favor-composition-over-inheritance"><a href="#Item-16-Favor-composition-over-inheritance" class="headerlink" title="Item 16. Favor composition over inheritance"></a>Item 16. Favor composition over inheritance</h3><p>Unlike method invocation, inheritance violates encapsulation.</p>
<p>Composition: the existing class becomes a component of a new one. Each instance method in the new class invokes the corresponding method on the contained instance of the existing class and returns the results. This is called forwarding and <code>Decorator pattern</code>. And combination of composition and forwarding is loosely referred to as delegation.</p>
<p>Inheritance is appropriate only in circumstances where the subclass is a subtype of the superclass.</p>
<p>Wrapper classes (composition) are not suited for callback framework.</p>
<hr>

<h3 id="Item-17-Design-and-document-for-inheritance-or-else-prohibit-it"><a href="#Item-17-Design-and-document-for-inheritance-or-else-prohibit-it" class="headerlink" title="Item 17. Design and document for inheritance or else prohibit it"></a>Item 17. Design and document for inheritance or else prohibit it</h3><ul>
<li>The class must document precisely the effects of overriding any method and its self-use of overridable methods.</li>
<li>To allow programmers to write efficient subclasses without undue pain, a class may have to provide hooks into its internal working in the form of judiciously chosen protected methods or even protected methods or even protected fields. That helps subclasses reuse them more easily.</li>
<li>The only way to test a class designed for inheritance is to write subclasses. Experience shows that three subclasses are sufficient to test an standard class.</li>
</ul>
<p>To allow inheritance, follow these rules:</p>
<ul>
<li>Constructors must not invoke overridable methods.</li>
<li>If implement Clonable and Serializable in a class, neither clone nor readObject may invoke an override method directly or indirectly.</li>
</ul>
<p>Designing a class for inheritance places substantial limitations on the class. </p>
<p>The best solution to inheritance problem is to prohibit subclassing in classes that are not designed and documented to be safely subclassed. Two ways:</p>
<ul>
<li>Declare the class final.</li>
<li>Make all the constructors private or package-private and to add public static factories in place of the constructors.</li>
</ul>
<hr>

<h3 id="Item-18-Prefer-interfaces-to-abstract-classes"><a href="#Item-18-Prefer-interfaces-to-abstract-classes" class="headerlink" title="Item 18. Prefer interfaces to abstract classes"></a>Item 18. Prefer interfaces to abstract classes</h3><p>Extending abstract class means subclass is a type of abstract class. Existing classes can be easily retrofitted to implement a new interface.</p>
<p>Interfaces are ideal for defining mixins. Mixins mean a class can implement in addition to its primary type to declare that it provides some optional behavior. They allow the construction of nonhierarchical type framework.</p>
<p>Interfaces enable safe, powerful functionality enhancements.</p>
<p>Combine the virtues of interfaces and abstract class by providing an abstract skeletal implementation class to go with each nontrivial interface exported. A typical skeletal implementation is an abstract class implements interface(s). So it is designed for inheritance.</p>
<p>Simple implementation is that it implements an interface and is designed for inheritance but not abstract.</p>
<p>Abstract class is far easier to evolve than interface is. Once interface is released and widely implemented, it is almost impossible to change. Really need to get it right in the first time.</p>
<hr>

<h3 id="Item-19-Use-interfaces-only-to-define-type"><a href="#Item-19-Use-interfaces-only-to-define-type" class="headerlink" title="Item 19. Use interfaces only to define type"></a>Item 19. Use interfaces only to define type</h3><p>The constant interface pattern is a poor use of interfaces.</p>
<hr>

<h3 id="Item-20-Prefer-class-hierarchies-to-tagged-classes"><a href="#Item-20-Prefer-class-hierarchies-to-tagged-classes" class="headerlink" title="Item 20. Prefer class hierarchies to tagged classes"></a>Item 20. Prefer class hierarchies to tagged classes</h3><p>Tag class is the class whose instances come in two or more flavors and contain a tag field indicating the flavor of the instance.</p>
<p>So all in all: Interface &gt; abstract class &gt; tagged class. ( &gt; means preference)</p>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">Share</a>
        </div>
        
        
  
  <div class="tags">
    <a href="/tags/Java/">Java</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>






  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2017-09-24T01:08:51.000Z"><a href="/2017/09/23/Java-9-New-Features/">2017-09-23</a></time>
      
      
  
    <h1 class="title"><a href="/2017/09/23/Java-9-New-Features/">Java 9 New Features</a></h1>
  

    </header>
    <div class="entry">
      
      
        <p>Java 9 is released on Sep 21, 2017. Many new features are added and here is the complete list of new feature from <a href="http://openjdk.java.net/projects/jdk9/" target="_blank" rel="external">OpenJDK official page</a>.</p>
<p>Here is a good summary. See this <a href="http://www.baeldung.com/new-java-9" target="_blank" rel="external">link</a>.</p>
<h3 id="Java-9-REPL-JShell"><a href="#Java-9-REPL-JShell" class="headerlink" title="Java 9 REPL(JShell)"></a>Java 9 REPL(JShell)</h3><p>In Java 9, we can use a command line tool called <code>JShell</code> to execute Java statement, which is similar to python shell. The command to start JSell is:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; jshell</span><br><span class="line"></span><br><span class="line">(output is similar as follow)</span><br><span class="line">|  Welcome to JShell -- Version 9</span><br><span class="line">|  For an introduction type: /help intro</span><br></pre></td></tr></table></figure>
<p>And we can write and execute Java code as following simple example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">jshell&gt; int a = 10, b = 20;</span><br><span class="line">a ==&gt; 10</span><br><span class="line">b ==&gt; 20</span><br><span class="line"></span><br><span class="line">jshell&gt; int c = a + b;</span><br><span class="line">c ==&gt; 30</span><br><span class="line"></span><br><span class="line">jshell&gt; int sum = a + b + c;</span><br><span class="line">sum ==&gt; 60</span><br><span class="line"></span><br><span class="line">jshell&gt; System.out.println(&quot;Sum of a, b and c is : &quot; + sum);</span><br><span class="line">Sum of a, b and c is : 60</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### Factory Methods for Immutable Data Structures</span><br><span class="line"></span><br><span class="line">In Java 9, factory methods for immutable List, Set, Map and Map.Entry are available to create empty or non-empty Collection object. They are `of()` methods. </span><br><span class="line"></span><br><span class="line">Here are some simple examples:</span><br><span class="line"></span><br><span class="line">** Immutable List  **</span><br></pre></td></tr></table></figure>
<p>jshell&gt; List immutableEmptyList = List.of();<br>immutableEmptyList ==&gt; []</p>
<p>jshell&gt; List immutableList = List.of(“one”,”two”,”three”);<br>immutableList ==&gt; [one, two, three]<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">** Immutable Map **</span><br></pre></td></tr></table></figure></p>
<p>jshell&gt; Map immutableEmptyMap = Map.of()<br>immutableEmptyMap ==&gt; {}</p>
<p>jshell&gt; Map immutableMap = Map.of(“one”, 1, “two”, 2, “three”, 3)<br>immutableMap ==&gt; {three=3, two=2, one=1}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### Private Methods in Interface</span><br><span class="line"></span><br><span class="line">In Java 9, users can define private static or non-static methods inside interface.</span><br><span class="line"></span><br><span class="line">See this sample code:</span><br></pre></td></tr></table></figure></p>
<p>import java.time.Clock;<br>import java.time.Duration;<br>import java.time.Instant;</p>
<p>public interface isDatabaseItem {</p>
<pre><code>Long defaultTimeToLive = generateDefaultTimeToLive();

private static Long generateDefaultTimeToLive() {
    Instant currentTime = Instant.now( Clock.systemDefaultZone() );
    return currentTime.plus( Duration.ofSeconds(1L) ).getEpochSecond();
}
</code></pre><p>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### Modue Definition</span><br><span class="line"></span><br><span class="line">A modular system provides capabilities similar to OSGi framework’s system. Modules have a concept of dependencies, can export a public API and keep implementation details hidden/private. One of the main motivations here is to provide modular JVM, which can run on devices with a lot less available memory. The JVM could run with only those modules and APIs which are required by the application. </span><br><span class="line"></span><br><span class="line">Simply put, the modules are going to be described in a file called module-info.java located in the top of java code hierarchy. Here is a sample code from [OpenJDK](http://openjdk.java.net/projects/jigsaw/quick-start).</span><br></pre></td></tr></table></figure></p>
<p>src/org.astro/module-info.java<br>src/org.astro/org/astro/World.java<br>src/com.greetings/com/greetings/Main.java<br>src/com.greetings/module-info.java</p>
<p>$ cat src/org.astro/module-info.java<br>module org.astro {<br>    exports org.astro;<br>}</p>
<p>$ cat src/org.astro/org/astro/World.java<br>package org.astro;<br>public class World {<br>   public static String name() {<br>        return “world”;<br>   }<br>}</p>
<p>$ cat src/com.greetings/module-info.java<br>module com.greetings {<br>    requires org.astro;<br>}</p>
<p>$ cat src/com.greetings/com/greetings/Main.java<br>package com.greetings;<br>import org.astro.World;<br>public class Main {<br>    public static void main(String[] args) {<br>        System.out.format(“Greetings %s!%n”, World.name());<br>    }<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### Http2 Client</span><br><span class="line">The new API is located under the `java.net.http package`. It should support both HTTP/2 protocol and WebSocket handshake, with performance that should be comparable with the Apache HttpClient, Netty and Jetty. And HTTP Client JEP is moved to Incubator module, which is `jdk.incubator.http`.</span><br><span class="line"></span><br><span class="line">Here is the sample code about GET request:</span><br></pre></td></tr></table></figure></p>
<p>URI httpURI = new URI(“<a href="http://localhost:9001" target="_blank" rel="external">http://localhost:9001</a>“);<br>HttpRequest request = HttpRequest.create(httpURI).GET();<br>HttpResponse response = request.response();<br>String responseBody = response.body(HttpResponse.asString());<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### Improvements in Stream API</span><br><span class="line">Four new methods are added to `java.util.Stream` interface. Two of them are very important: dropWhile and takeWhile methods. </span><br><span class="line"></span><br><span class="line">The `takeWhile()` takes a predicate as an argument and returns a Stream of subset of the given Stream values until that Predicate returns false for first time. If first value does NOT satisfy that Predicate, it just returns an empty Stream.</span><br><span class="line"></span><br><span class="line">Here is the sample code about `takeWhile()` method:</span><br></pre></td></tr></table></figure></p>
<p>Stream.of(1,2,3,4,5,6,7,8,9,10).takeWhile(i -&gt; i &lt; 5 ).forEach(System.out::println);<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### Diamond Operator for Anonymous Inner Class</span><br><span class="line">Now diamond operator in conjunction with anonymous inner classes is supported in Java 9.</span><br><span class="line"></span><br><span class="line">Here is the sample code:</span><br></pre></td></tr></table></figure></p>
<p>FooClass<integer> fc = new FooClass&lt;&gt;(1) { // anonymous inner class<br>};</integer></p>
<p>FooClass&lt;? extends Integer&gt; fc0 = new FooClass&lt;&gt;(1) {<br>    // anonymous inner class<br>};</p>
<p>FooClass&lt;?&gt; fc1 = new FooClass&lt;&gt;(1) { // anonymous inner class<br>};<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### Improvements in Process API</span><br><span class="line">Some new classes and methods are added for controlling and managing OS processes. Two main ones are `java.lang.ProcessHandle` and `java.lang.ProcessHandle.Info`. </span><br><span class="line"></span><br><span class="line">Here is the sample code of `java.lang.ProcessHandle` usage:</span><br></pre></td></tr></table></figure></p>
<p>ProcessHandle self = ProcessHandle.current();<br>long PID = self.getPid();<br>ProcessHandle.Info procInfo = self.info();</p>
<p>Optional<string[]> args = procInfo.arguments();<br>Optional<string> cmd =  procInfo.commandLine();<br>Optional<instant> startTime = procInfo.startInstant();<br>Optional<duration> cpuUsage = procInfo.totalCpuDuration();<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">And here is the sample code of stopping all the running child processes using destroy():</span><br></pre></td></tr></table></figure></duration></instant></string></string[]></p>
<p>childProc = ProcessHandle.current().children();<br>childProc.forEach(procHandle -&gt; {<br>    assertTrue(“Could not kill process “ + procHandle.getPid(), procHandle.destroy());<br>});<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### Improvements in Optional Class to Stream</span><br><span class="line">Use `java.util.Optional.stream()` to use the Stream API on Optional elements. </span><br><span class="line"></span><br><span class="line">Here is the sample code:</span><br></pre></td></tr></table></figure></p>
<p>List<string> filteredList = listOfOptionals.stream()<br>  .flatMap(Optional::stream)<br>  .collect(Collectors.toList());<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### Reactive Streams</span><br><span class="line">The Reactive Streams publish-subscribe framework is supported in Java 9 to to implement Asynchronous, Scalable and Parallel applications very easily. </span><br><span class="line"></span><br><span class="line">Here are following API to develop Reactive Streams in Java-based applications.</span><br><span class="line">* java.util.concurrent.Flow</span><br><span class="line">* java.util.concurrent.Flow.Publisher</span><br><span class="line">* java.util.concurrent.Flow.Subscriber</span><br><span class="line">* java.util.concurrent.Flow.Processor</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### Improvements in Try-With-Resources</span><br><span class="line">Now if the resource is referenced by a final or effectively final variable, a try-with-resources statement can manage a resource without a new variable being declared. </span><br><span class="line"></span><br><span class="line">Here is the sample code:</span><br></pre></td></tr></table></figure></string></p>
<p>MyAutoCloseable mac = new MyAutoCloseable();<br>try (mac) {<br>    // do some stuff with mac<br>}</p>
<p>try (new MyAutoCloseable() { }.finalWrapper.finalCloseable) {<br>   // do some stuff with finalCloseable<br>} catch (Exception ex) { }<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### Improvements in CompletableFuture API</span><br><span class="line">Now `CompletableFuture` API supports some delays, timeouts and better sub-classing, and has some utility methods.</span><br><span class="line"></span><br><span class="line">Here is the sample code of `delayedExecutor()`, which is static utility method used to return a new Executor that submits a task to the default executor after the given delay.</span><br></pre></td></tr></table></figure></p>
<p>Executor exe = CompletableFuture.delayedExecutor(50L, TimeUnit.SECONDS);<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### Мulti-Resolution Image API</span><br><span class="line">The interface `java.awt.image.MultiResolutionImage` encapsulates a set of images with different resolutions into a single object. We can retrieve a resolution-specific image variant based on a given DPI metric and set of image transformations or retrieve all of the variants in the image.</span><br><span class="line"></span><br><span class="line">The `java.awt.Graphics` class gets variant from a multi-resolution image based on the current display DPI metric and any applied transformations.</span><br><span class="line"></span><br><span class="line">The class `java.awt.image.BaseMultiResolutionImage` provides basic implementation.</span><br><span class="line"></span><br><span class="line">Here is the sample code:</span><br></pre></td></tr></table></figure></p>
<p>BufferedImage[] resolutionVariants = ….<br>MultiResolutionImage bmrImage<br>  = new BaseMultiResolutionImage(baseIndex, resolutionVariants);<br>Image testRVImage = bmrImage.getResolutionVariant(16, 16);<br>assertSame(“Images should be the same”, testRVImage, resolutionVariants[3]);<br>```</p>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">Share</a>
        </div>
        
        
  
  <div class="tags">
    <a href="/tags/Java/">Java</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>






  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2017-09-15T05:26:09.000Z"><a href="/2017/09/14/Thinking-in-Test-Driven-Development/">2017-09-14</a></time>
      
      
  
    <h1 class="title"><a href="/2017/09/14/Thinking-in-Test-Driven-Development/">Thinking in Test Driven Development</a></h1>
  

    </header>
    <div class="entry">
      
      
        <p>The book: Test Driven Development By Example, which is written by Kent Beck, is really a good book. I do not think currently I have already fully mastered the TDD skill and be able to apply this skill in my SDE job in the 100% right way. But I still would like to share my thoughts on this book.</p>
<p>In my software development model, here are the steps to apply TDD in practice:</p>
<ul>
<li>Fully understand the user requirement.</li>
<li>Do a good design for the project, which includes the system design and object-oriented design.</li>
<li>Based on the design, list all the features need to accomplish.</li>
<li>Start with one of these features, write a test for it, then try to pass the test (fake it or provide the correct code), and refactor the test code and production code.</li>
<li>While implement more and more features, refactor the production code (remove duplication, use inheritance, use interface and so on …). If any tests fail after refactor, figure out what is going wrong and fix the bug. Also remember to refactor the test code.</li>
<li>While refactor the code, keep the code clean so that it is simple, easy to read and maintain.</li>
</ul>
<hr>

<p>Here are some useful tips borrowed from the book.</p>
<ul>
<li>Create a test list including all the required tests at the beginning.</li>
<li>The goal of each test is to leave the world in exactly the same state before it ran.</li>
<li>Each test should represent one step towards overall goal.</li>
<li>What should be tested:<ul>
<li>Conditions</li>
<li>Loops</li>
<li>Operations</li>
<li>Polymorphism</li>
</ul>
</li>
<li>What factors should be included in the test:<ul>
<li>What does the operation belong to.</li>
<li>What are the correct inputs.</li>
<li>What is the correct output given those input.</li>
</ul>
</li>
<li>Some attributes of tests suggesting a design in trouble:<ul>
<li>Long setup code.</li>
<li>Setup duplication.</li>
<li>Long running tests.</li>
<li>Fragile tests.</li>
</ul>
</li>
<li>Write assert first in the test.</li>
<li>To improve test coverage, take a fixed set of tests and simplify the logic of the program.</li>
<li>Avoid test coupling. All the tests should be run independently.</li>
<li>Isolating tests also helps to decouple objects (Improve the design).</li>
<li>Tests should be in a small scale instead of whole application.</li>
<li>For common objects needed by several tests, convert local variables into instance variables.</li>
<li>Use data that makes the test easy to read and follow.</li>
<li>Evident data seems to be an exception to the rule that you do not want magic numbers in your code.</li>
<li>When a defect is reported, write the smallest possible test that fails, and that once it runs, the defect will be repaired.</li>
<li>To implement an operation that works with collections of objects, implement it without the collection first, then make it work with collections.</li>
<li>To design objects that will be widely shared but for whom identify is unimportant, set their state when they are created and never change it, and operations on the object always return a new object.</li>
<li>Always make sure all the tests are running before check in your own code.</li>
<li>Unless have reason to distrust it, do not test code from others. </li>
<li>toString method is an exception that does not require test.</li>
<li>Physical setup (for working environment): cheap disk, nice chair.</li>
<li>Get cheap/slow/old machines for individual email and surfing.</li>
<li>Leave a programming session when programming alone, leave the last test broken.</li>
<li>Leave a programming session when programming in a team, leave all the test running.</li>
<li>Feel lost, throw away the code and start over.</li>
<li>Feel tired or stuck, take a break.</li>
</ul>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">Share</a>
        </div>
        
        
  
  <div class="tags">
    <a href="/tags/Test/">Test</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>






  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2017-09-11T08:51:57.000Z"><a href="/2017/09/11/Aspect-Oriented-Programming/">2017-09-11</a></time>
      
      
  
    <h1 class="title"><a href="/2017/09/11/Aspect-Oriented-Programming/">Aspect Oriented Programming</a></h1>
  

    </header>
    <div class="entry">
      
      
        <p>Here is <a href="https://en.wikipedia.org/wiki/Aspect-oriented_programming" target="_blank" rel="external">Aspect-oriented programming in Wikipedia</a>.</p>
<p>Aspect-oriented programming (AOP) is a programming paradigm that aims to increase modularity by allowing the separation of cross-cutting concerns. It does so by adding additional behavior to existing code (an advice) without modifying the code itself, instead separately specifying which code is modified via a “pointcut” specification, such as “log all function calls when the function’s name begins with ‘set’”. This allows behaviors that are not central to the business logic (such as logging) to be added to a program without cluttering the code, core to the functionality. AOP forms a basis for aspect-oriented software development.</p>
<p>Note that AOP usually uses <a href="http://yular.github.io/2017/09/10/Proxy-Pattern-In-Java/">Proxy Pattern</a> in its implementation.</p>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">Share</a>
        </div>
        
        
  
  <div class="tags">
    <a href="/tags/Design-Pattern/">Design Pattern</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>






  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2017-09-11T00:02:49.000Z"><a href="/2017/09/10/Proxy-Pattern-In-Java/">2017-09-10</a></time>
      
      
  
    <h1 class="title"><a href="/2017/09/10/Proxy-Pattern-In-Java/">Proxy Pattern (In Java)</a></h1>
  

    </header>
    <div class="entry">
      
      
        <p>See the meaning of <a href="https://en.wikipedia.org/wiki/Proxy" target="_blank" rel="external">Proxy in Wikipedia</a>.</p>
<p>As we know, when we visit a web service, we may not directly get the access of the hosts where the service is deployed but the hosts which sends the same or reasonable response as the service does. And those hosts are proxies.</p>
<p>So in the design pattern, proxy pattern uses the similar mechanism. A class (proxy class) represents the functionality of the other class. Proxy class implements or extends the same interface or abstract class as the class proxied does, and proxy instance contains the instance proxied.</p>
<p>See the <a href="https://en.wikipedia.org/wiki/Proxy_pattern" target="_blank" rel="external">Proxy Pattern in Wikipedia</a>. The diagram there can help to understand the structure of this design pattern.</p>
<p>Here is some sample code about Proxy Pattern.</p>
<h3 id="Sample-Code"><a href="#Sample-Code" class="headerlink" title="Sample Code"></a>Sample Code</h3><p>Here is the link of below <a href="https://github.com/yular/Java-CodeLibrary/tree/master/DesignPattern/ProxyPattern/src/com/yulartech/designpattern/proxypattern" target="_blank" rel="external">sample code</a>.</p>
<p>Firt of all, here is the service interface:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">package com.yulartech.designpattern.proxypattern;</span><br><span class="line"></span><br><span class="line">public interface ImageService &#123;</span><br><span class="line">    void showImage();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Then the real image service and proxy image service must implement this interface.</p>
<p>Real image service source code is below:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package com.yulartech.designpattern.proxypattern;</span><br><span class="line"></span><br><span class="line">public class RealImageService implements ImageService &#123;</span><br><span class="line">    private String imageFileName;</span><br><span class="line"></span><br><span class="line">    RealImageService(String imageFileName)&#123;</span><br><span class="line">        this.imageFileName = imageFileName;</span><br><span class="line">        upLoadImage();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void upLoadImage() &#123;</span><br><span class="line">        final String msg = String.format(&quot;Successfully upload image %s to the service.&quot;, imageFileName);</span><br><span class="line">        System.out.println(msg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void showImage() &#123;</span><br><span class="line">        final String msg = String.format(&quot;Show the image %s.&quot;, imageFileName);</span><br><span class="line">        System.out.println(msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Proxy image service source code is below:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">package com.yulartech.designpattern.proxypattern;</span><br><span class="line"></span><br><span class="line">public class ProxyImageService implements ImageService&#123;</span><br><span class="line">    private RealImageService realImageService;</span><br><span class="line">    private String imageFileName;</span><br><span class="line">    private boolean isImageCached;</span><br><span class="line"></span><br><span class="line">    public ProxyImageService(String imageFileName)&#123;</span><br><span class="line">        this.imageFileName = imageFileName;</span><br><span class="line">        this.isImageCached = false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void showImage() &#123;</span><br><span class="line">        if (realImageService == null) &#123;</span><br><span class="line">            realImageService = new RealImageService(imageFileName);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (isImageCached) &#123;</span><br><span class="line">            final String msg = String.format(&quot;Get image %s from cache in proxy. &quot;, imageFileName);</span><br><span class="line">            System.out.print(msg);</span><br><span class="line">        &#125;</span><br><span class="line">        realImageService.showImage();</span><br><span class="line">        cacheImageInProxy();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void cacheImageInProxy() &#123;</span><br><span class="line">        isImageCached = true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>At last, implement a Main class to run the demo:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">package com.yulartech.designpattern.proxypattern;</span><br><span class="line"></span><br><span class="line">public class Main &#123;</span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line">        String imageFileName = &quot;test-image.png&quot;;</span><br><span class="line">        ProxyImageService proxyImageService = new ProxyImageService(imageFileName);</span><br><span class="line"></span><br><span class="line">        //Show image from actual service</span><br><span class="line">        proxyImageService.showImage();</span><br><span class="line">        System.out.println();</span><br><span class="line"></span><br><span class="line">        //Show image from proxy service</span><br><span class="line">        proxyImageService.showImage();</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>And if everything goes well, output should be:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Successfully upload image test-image.png to the service.</span><br><span class="line">Show the image test-image.png.</span><br><span class="line"></span><br><span class="line">Get image test-image.png from cache in proxy. Show the image test-image.png.</span><br></pre></td></tr></table></figure>
<p>That means we can retrieve images from proxy in cache instead of actual image service: Proxy class just represents the functionality of the other class.</p>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">Share</a>
        </div>
        
        
  
  <div class="tags">
    <a href="/tags/Design-Pattern/">Design Pattern</a>, <a href="/tags/Java/">Java</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>







<nav id="pagination">
  
  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/">&laquo; Vorherige Seite</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/23/">23</a><a class="extend next" rel="next" href="/page/3/">Nächste Seite &raquo;</a>
  </nav>

</nav>
</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Google Search">
    <input type="hidden" name="q" value="">
  </form>
</div>

<div class="search">
   <form class="search" action="/search/index.html" method="get" accept-charset="utf-8">
     <input type="search" id="search" class="st-default-search-input" style="height:40px" maxlength="20" placeholder="WebSite Search" />
     <input type="hidden" name="q" value="">
   </form>
</div>



  
  <div class="widget tag">
    <h3 class="title">Archive</h3>
    <div class="entry">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">February 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a></li></ul>
    </div>
  </div>



  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/Algorithm/">Algorithm</a><small>40</small></li>
  
    <li><a href="/tags/Android/">Android</a><small>1</small></li>
  
    <li><a href="/tags/Bit-Manipulation/">Bit Manipulation</a><small>1</small></li>
  
    <li><a href="/tags/Business-Model/">Business Model</a><small>1</small></li>
  
    <li><a href="/tags/C/">C</a><small>4</small></li>
  
    <li><a href="/tags/C/">C++</a><small>2</small></li>
  
    <li><a href="/tags/Cloud-Computing/">Cloud Computing</a><small>29</small></li>
  
    <li><a href="/tags/Combinatorics/">Combinatorics</a><small>1</small></li>
  
    <li><a href="/tags/Data-Analysis/">Data Analysis</a><small>1</small></li>
  
    <li><a href="/tags/Database/">Database</a><small>10</small></li>
  
    <li><a href="/tags/Design-Pattern/">Design Pattern</a><small>3</small></li>
  
    <li><a href="/tags/Finance/">Finance</a><small>1</small></li>
  
    <li><a href="/tags/Graph-Theory/">Graph Theory</a><small>1</small></li>
  
    <li><a href="/tags/IOS/">IOS</a><small>1</small></li>
  
    <li><a href="/tags/Interview-Summary/">Interview Summary</a><small>2</small></li>
  
    <li><a href="/tags/Java/">Java</a><small>33</small></li>
  
    <li><a href="/tags/Javascript/">Javascript</a><small>1</small></li>
  
    <li><a href="/tags/Kotlin/">Kotlin</a><small>1</small></li>
  
    <li><a href="/tags/Life/">Life</a><small>5</small></li>
  
    <li><a href="/tags/Life-Thoughts/">Life Thoughts</a><small>1</small></li>
  
    <li><a href="/tags/Linux/">Linux</a><small>12</small></li>
  
    <li><a href="/tags/Lua/">Lua</a><small>6</small></li>
  
    <li><a href="/tags/Mac/">Mac</a><small>1</small></li>
  
    <li><a href="/tags/Machine-Learning/">Machine Learning</a><small>11</small></li>
  
    <li><a href="/tags/Natural-Language-Processing/">Natural Language Processing</a><small>1</small></li>
  
    <li><a href="/tags/Python/">Python</a><small>4</small></li>
  
    <li><a href="/tags/R/">R</a><small>1</small></li>
  
    <li><a href="/tags/Redis/">Redis</a><small>1</small></li>
  
    <li><a href="/tags/Ruby/">Ruby</a><small>2</small></li>
  
    <li><a href="/tags/Software-Development/">Software Development</a><small>6</small></li>
  
    <li><a href="/tags/SparkSQL/">SparkSQL</a><small>1</small></li>
  
    <li><a href="/tags/String/">String</a><small>1</small></li>
  
    <li><a href="/tags/System-Design/">System Design</a><small>7</small></li>
  
    <li><a href="/tags/Test/">Test</a><small>5</small></li>
  
    <li><a href="/tags/Tools/">Tools</a><small>4</small></li>
  
    <li><a href="/tags/Web/">Web</a><small>17</small></li>
  
  </ul>
</div>


  
<div class="widget tagcloud">
  <h3 class="title">Tag-Cloud</h3>
  <div class="entry">
    <a href="/tags/Algorithm/" style="font-size: 20px;">Algorithm</a> <a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/Bit-Manipulation/" style="font-size: 10px;">Bit Manipulation</a> <a href="/tags/Business-Model/" style="font-size: 10px;">Business Model</a> <a href="/tags/C/" style="font-size: 12.31px;">C</a> <a href="/tags/C/" style="font-size: 10.77px;">C++</a> <a href="/tags/Cloud-Computing/" style="font-size: 18.46px;">Cloud Computing</a> <a href="/tags/Combinatorics/" style="font-size: 10px;">Combinatorics</a> <a href="/tags/Data-Analysis/" style="font-size: 10px;">Data Analysis</a> <a href="/tags/Database/" style="font-size: 15.38px;">Database</a> <a href="/tags/Design-Pattern/" style="font-size: 11.54px;">Design Pattern</a> <a href="/tags/Finance/" style="font-size: 10px;">Finance</a> <a href="/tags/Graph-Theory/" style="font-size: 10px;">Graph Theory</a> <a href="/tags/IOS/" style="font-size: 10px;">IOS</a> <a href="/tags/Interview-Summary/" style="font-size: 10.77px;">Interview Summary</a> <a href="/tags/Java/" style="font-size: 19.23px;">Java</a> <a href="/tags/Javascript/" style="font-size: 10px;">Javascript</a> <a href="/tags/Kotlin/" style="font-size: 10px;">Kotlin</a> <a href="/tags/Life/" style="font-size: 13.08px;">Life</a> <a href="/tags/Life-Thoughts/" style="font-size: 10px;">Life Thoughts</a> <a href="/tags/Linux/" style="font-size: 16.92px;">Linux</a> <a href="/tags/Lua/" style="font-size: 13.85px;">Lua</a> <a href="/tags/Mac/" style="font-size: 10px;">Mac</a> <a href="/tags/Machine-Learning/" style="font-size: 16.15px;">Machine Learning</a> <a href="/tags/Natural-Language-Processing/" style="font-size: 10px;">Natural Language Processing</a> <a href="/tags/Python/" style="font-size: 12.31px;">Python</a> <a href="/tags/R/" style="font-size: 10px;">R</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/Ruby/" style="font-size: 10.77px;">Ruby</a> <a href="/tags/Software-Development/" style="font-size: 13.85px;">Software Development</a> <a href="/tags/SparkSQL/" style="font-size: 10px;">SparkSQL</a> <a href="/tags/String/" style="font-size: 10px;">String</a> <a href="/tags/System-Design/" style="font-size: 14.62px;">System Design</a> <a href="/tags/Test/" style="font-size: 13.08px;">Test</a> <a href="/tags/Tools/" style="font-size: 12.31px;">Tools</a> <a href="/tags/Web/" style="font-size: 17.69px;">Web</a>
  </div>
</div>


  

  <div class="widget tag">
  <h3 class="title">Friend Links</h3>
  <ul class="entry">
    <li><a href="http://blog.haosdent.me/"  target="_blank">Haosong Huang's Blog</a></li>
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">Recent Posts</h3>
  <ul class="entry">
    
      <li>
        <a href="/2017/12/03/Reading-Note-of-Clean-Code/">Reading Note of Clean Code</a>
      </li>
    
      <li>
        <a href="/2017/12/03/Reading-Note-of-Code-Complete-III/">Reading Note of Code Complete III</a>
      </li>
    
      <li>
        <a href="/2017/12/03/Reading-Note-of-Code-Complete-II/">Reading Note of Code Complete II</a>
      </li>
    
      <li>
        <a href="/2017/12/03/Reading-Note-of-Code-Complete-I/">Reading Note of Code Complete I</a>
      </li>
    
      <li>
        <a href="/2017/11/13/Reading-Note-of-Java-Concurrency-in-Practice-IV/">Reading Note of Java Concurrency in Practice IV</a>
      </li>
    
  </ul>
</div>



  <div id="recentcomments" class="widget tag">
    <h3 class="title">Recent Comments</h3>
    <div class="entry">
      <div id="recentcomments" class="dsq-widget">
        <script type="text/javascript" src="http://yular.disqus.com/recent_comments_widget.js?num_items=10&hide_avatars=1&avatar_size=32&excerpt_length=100&hide_mods=0"></script>
      </div>
    </div>
</div>


  <div class="widget tag">
  <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <h3 class="title">Statics</h3>
  <ul class="entry">   
    <li><span id="busuanzi_container_site_pv">Total Visits: <span id="busuanzi_value_site_pv"></span></span></li>
    <li><span id="busuanzi_container_site_uv">Total Visitors: <span id="busuanzi_value_site_uv"></span></span></li>
  </div>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  <p>
  
  &copy; 2017 BaiChuan Yang
  
  All rights reserved.</p>
  <p>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></p>
</div>
<div class="alignright">
   <div style="font-family: FontAwesome;font-size: 20px;">
     <a href="http://weibo.com/u/5854007817?is_all=1" title="weibo" target="_blank"><img src="/css/images/weibo-social-logo.png"></a>&nbsp;
     <a href="https://www.facebook.com/johnson.green.338" title="Facebook" target="_blank"><img src="/css/images/facebook-logo.png"></a>&nbsp;
     <a href="https://twitter.com/JohnsonGreen5" title="twitter" target="_blank"><img src="/css/images/twitter-logo.png"></a>&nbsp;
     <a href="https://www.linkedin.com/in/baichuan-yang-6b7b6579" title="LinkedIn" target="_blank"><img src="/css/images/linkedin-logo.png"></a>&nbsp;
     <a href="https://github.com/yular" title="GitHub" target="_blank"><img src="/css/images/github-sign.png"></a>&nbsp;
     <a href="https://plus.google.com/u/0/+BaichuanYANG/" title="Google+" target="_blank"><img src="/css/images/social-google-plus-square-button.png"></a>
  </div>
</div>
<div class="clearfix"></div>

<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
</footer>
  <script src="/js/jquery-1.12.1.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


    <script type="text/javascript">
    var disqus_shortname = 'yular';

    (function(){
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
    </script>

<div id="totop" style="position:fixed;bottom:150px;right:50px;cursor: pointer;">
<a title="backtotop"><img src="/imgs/scrollup.png"/></a>
</div>

<script src="/js/totop.js"></script>
<div id='bg'></div>

</body>
</html>