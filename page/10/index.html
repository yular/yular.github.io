<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8" />
  
  <title>Seite 10 | YBC HomePage</title>
  <meta name="author" content="BaiChuan Yang" />

  
  <meta name="description" content="Blog mainly about IT technology and Interesting Life Events~" />
  

  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

  
  <meta property="og:site_name" content="YBC HomePage" />

  <meta name="google-site-verification" content="IK-tjIwORWUinhhD-XZkyX5FWQgd568VBgmJorjK7Bg" />
  <meta name="baidu-site-verification" content="iAx4x1uv2O" />
  <meta name="msvalidate.01" content="E6F8036020E5423AA7576A75B806937B" />  

  
    <meta property="og:image" content="undefined" />
  

  
  <link href="/css/images/favicon.ico" rel="icon" />
  

  <link rel="alternate" href="/atom.xml" title="YBC HomePage" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-63602183-1', 'auto');
	ga('send', 'pageview');

</script>



  <!-- baidu webmaster push -->
  <script src='//push.zhanzhang.baidu.com/push.js'></script>

  <!-- leancloud  -->
  <script src="//cdn1.lncld.net/static/js/3.5.0/av-min.js"></script>
  <script>AV.init({ appId: 'EQcvlXLG9ctn5wOIelQIn0Vy-gzGzoHsz', appKey: 'kT6uiu1be4iGyGSYJ9QhDmrK'});</script>
</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">YBC HomePage</a></h1>
  <h2><a href="/">Study~ Work~ Life~ Everything is here~</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
      <li><a href="/about">About</a></li>
    
      <li><a href="/atom.xml">RSS</a></li>
    
      <li><a href="/sitemap.xml">SiteMap</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
  
  _st('install','xeEkJ65dmswemsvZM1Nx','2.0.0');
</script>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2017-01-09T00:09:46.000Z"><a href="/2017/01/08/C-MongoDB-QuickStart/">2017-01-08</a></time>
      
      
  
    <h1 class="title"><a href="/2017/01/08/C-MongoDB-QuickStart/">C MongoDB QuickStart</a></h1>
  

    </header>
    <div class="entry">
      
      
        <p>Here is the tutorial to write and build a C program to access MongoDB database.</p>
<h2 id="Dependency-Installation"><a href="#Dependency-Installation" class="headerlink" title="Dependency Installation"></a>Dependency Installation</h2><p>Here is the <a href="http://mongoc.org/libmongoc/current/installing.html" target="_blank" rel="external">tutorial</a> to install necessary dependency and libraries.</p>
<p>Here is the <a href="http://mongoc.org/libmongoc/current/tutorial.html" target="_blank" rel="external">tutorial</a> of sample code.</p>
<hr>

<h2 id="Sample-Code"><a href="#Sample-Code" class="headerlink" title="Sample Code"></a>Sample Code</h2><p>Here is a sample code. Open a new C file called mongo_db_connect.c. Remember to replace specific parameters:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#include &lt;bson.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;bcon.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;mongoc.h&gt;</span></span><br><span class="line"></span><br><span class="line">int main (int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">   mongoc_client_t      *client;</span><br><span class="line">   mongoc_database_t    *database;</span><br><span class="line">   mongoc_collection_t  *collection;</span><br><span class="line">   mongoc_cursor_t      *cursor;</span><br><span class="line">   bson_t               *<span class="built_in">command</span>, reply, *insert, *query;</span><br><span class="line">   const bson_t         *doc;</span><br><span class="line">   bson_error_t         error;</span><br><span class="line">   char                 *str;</span><br><span class="line">   bool                 retval;</span><br><span class="line"></span><br><span class="line">   /*</span><br><span class="line">    *</span><br><span class="line">    * Required to initialize libmongoc<span class="string">'s internals</span><br><span class="line">    *</span><br><span class="line">    */</span><br><span class="line">   mongoc_init ();</span><br><span class="line"></span><br><span class="line">   /*</span><br><span class="line">    *</span><br><span class="line">    * Create a new client instance</span><br><span class="line">    *</span><br><span class="line">    */</span><br><span class="line">   client = mongoc_client_new ("mongodb://0.0.0.0:29000");</span><br><span class="line"></span><br><span class="line">   /*</span><br><span class="line">    *</span><br><span class="line">    * Register the application name so we can track it in the profile logs</span><br><span class="line">    *</span><br><span class="line">    * on the server. This can also be done from the URI (see other examples).</span><br><span class="line">    *</span><br><span class="line">    */</span><br><span class="line">   mongoc_client_set_appname (client, "mongodb-connection-status");</span><br><span class="line"></span><br><span class="line"> /*</span><br><span class="line"> *</span><br><span class="line"> *      Get a handle on the database "db_name" and collection "coll_name"</span><br><span class="line"> *       </span><br><span class="line"> */</span><br><span class="line">   database = mongoc_client_get_database (client, "database_name");</span><br><span class="line">   collection = mongoc_client_get_collection (client, "database_name", "table_name");</span><br><span class="line">   </span><br><span class="line">   /*</span><br><span class="line"> *</span><br><span class="line"> *       Do work. This example pings the database, prints the result as JSON and</span><br><span class="line"> *       performs an insert        </span><br><span class="line"> */</span><br><span class="line">   command = BCON_NEW ("ping", BCON_INT32 (1));</span><br><span class="line"></span><br><span class="line">   retval = mongoc_client_command_simple (client, "admin", command, NULL, &amp;reply, &amp;error);</span><br><span class="line"></span><br><span class="line">   if (!retval) &#123;</span><br><span class="line">      fprintf (stderr, "%s\n", error.message);</span><br><span class="line">      return EXIT_FAILURE;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   str = bson_as_json (&amp;reply, NULL);</span><br><span class="line">   printf ("Message %s\n", str);</span><br><span class="line"></span><br><span class="line">   bson_destroy (&amp;reply);</span><br><span class="line">   bson_destroy (command);</span><br><span class="line">   </span><br><span class="line">   /*</span><br><span class="line">    * </span><br><span class="line">    *      Insert one document into given database and collection</span><br><span class="line">    *</span><br><span class="line">    */</span><br><span class="line">    query = bson_new ();</span><br><span class="line">   cursor = mongoc_collection_find_with_opts (collection, query, NULL, NULL);</span><br><span class="line">   while (mongoc_cursor_next (cursor, &amp;doc)) &#123;</span><br><span class="line">      str = bson_as_json (doc, NULL);</span><br><span class="line">      printf ("%s\n", str);</span><br><span class="line">      bson_free (str);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> /*</span><br><span class="line"> *</span><br><span class="line"> *        Release our handles and clean up libmongoc</span><br><span class="line"> *        </span><br><span class="line"> */</span><br><span class="line">   mongoc_collection_destroy (collection);</span><br><span class="line">   mongoc_database_destroy (database);</span><br><span class="line">   mongoc_client_destroy (client);</span><br><span class="line">   mongoc_cursor_destroy (cursor);</span><br><span class="line">   mongoc_cleanup ();</span><br><span class="line"></span><br><span class="line">   return 0;</span><br><span class="line">  &#125;</span></span><br></pre></td></tr></table></figure></p>
<hr>

<h2 id="Compile-and-Build-Program"><a href="#Compile-and-Build-Program" class="headerlink" title="Compile and Build Program"></a>Compile and Build Program</h2><p>Execute following command to compile and build executable C program:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc mongo_db_connect.c -o mongo_db_connect $(pkg-config --cflags --libs libmongoc-1.0)</span><br></pre></td></tr></table></figure></p>
<p>Now we can run the program through this command:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./mongo_db_connect</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">Share</a>
        </div>
        
        
  
  <div class="tags">
    <a href="/tags/C/">C</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>






  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2017-01-09T00:09:32.000Z"><a href="/2017/01/08/C-MySQL-QuickStart/">2017-01-08</a></time>
      
      
  
    <h1 class="title"><a href="/2017/01/08/C-MySQL-QuickStart/">C MySQL QuickStart</a></h1>
  

    </header>
    <div class="entry">
      
      
        <p>Here is the tutorial to write and build a C program to access MySQL database.</p>
<h2 id="Dependency-Installation"><a href="#Dependency-Installation" class="headerlink" title="Dependency Installation"></a>Dependency Installation</h2><p>Here is the <a href="http://yular.github.io/2016/07/02/Install-MySQL-on-CentOS-Guide/">tutorial</a> to install necessary dependency and libraries. Check the section about MySQL Dev Installation.</p>
<hr>

<h2 id="Sample-Code"><a href="#Sample-Code" class="headerlink" title="Sample Code"></a>Sample Code</h2><p>Here is a sample code. Open a new C file called mysql_db_connect.c. Remember to replace specific parameters:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#include &lt;my_global.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;mysql.h&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">void finish_with_error(MYSQL *con)&#123;</span><br><span class="line"></span><br><span class="line">  fprintf(stderr, <span class="string">"%s\n"</span>, mysql_error(con));</span><br><span class="line">  mysql_close(con);</span><br><span class="line">  <span class="built_in">exit</span>(1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void finish_with_result(MYSQL_RES *result)&#123;</span><br><span class="line"></span><br><span class="line">  MYSQL_ROW row;</span><br><span class="line"></span><br><span class="line">  int i, num_fields = mysql_num_fields(result);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> ((row = mysql_fetch_row(result)))</span><br><span class="line">  &#123;</span><br><span class="line">      <span class="keyword">for</span>(i = 0; i &lt; num_fields; i++)</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="built_in">printf</span>(<span class="string">"%s "</span>, row[i] ? row[i] : <span class="string">"NULL"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      puts(<span class="string">""</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  mysql_free_result(result);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">int main(int argc, char **argv)&#123;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"MySQL client version: %s\n"</span>, mysql_get_client_info());</span><br><span class="line"></span><br><span class="line">  MYSQL *con = mysql_init(NULL);</span><br><span class="line">  MYSQL_RES *result = NULL;</span><br><span class="line">  MYSQL_ROW row;</span><br><span class="line">  </span><br><span class="line">  int i, mysql_num_fields;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (con == NULL)</span><br><span class="line">  &#123;</span><br><span class="line">      fprintf(stderr, <span class="string">"mysql_init() failed\n"</span>);</span><br><span class="line">      <span class="built_in">exit</span>(1);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (mysql_real_connect(con, <span class="string">"host_ip"</span>, <span class="string">"user_name"</span>, <span class="string">"password"</span>, NULL, 0, NULL, 0) == NULL)</span><br><span class="line">  &#123;</span><br><span class="line">      fprintf(stderr, <span class="string">"mysql_init() failed\n"</span>);</span><br><span class="line">      mysql_close(con);</span><br><span class="line">      <span class="built_in">exit</span>(1);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (mysql_query(con, <span class="string">"use towergirl"</span>))</span><br><span class="line">  &#123;</span><br><span class="line">      finish_with_error(con);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (mysql_query(con, <span class="string">"show tables"</span>))</span><br><span class="line">  &#123;</span><br><span class="line">      finish_with_error(con);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  result = mysql_store_result(con);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (result == NULL)</span><br><span class="line">  &#123;</span><br><span class="line">      finish_with_error(con);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  finish_with_result(result);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (mysql_query(con, <span class="string">"select * from user_account"</span>))</span><br><span class="line">  &#123;</span><br><span class="line">      finish_with_error(con);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  result = mysql_store_result(con);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (result == NULL)</span><br><span class="line">  &#123;</span><br><span class="line">      finish_with_error(con);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  finish_with_result(result);</span><br><span class="line"></span><br><span class="line">  mysql_close(con);</span><br><span class="line">  <span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<hr>

<h2 id="Compile-and-Build-Program"><a href="#Compile-and-Build-Program" class="headerlink" title="Compile and Build Program"></a>Compile and Build Program</h2><p>Execute following command to compile and build executable C program:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc mysql_db_connect.c -o mysql_db_connect `mysql_config --cflags --libs`</span><br></pre></td></tr></table></figure></p>
<p>Now we can run the program through this command:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./mysql_db_connect</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">Share</a>
        </div>
        
        
  
  <div class="tags">
    <a href="/tags/C/">C</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>






  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2017-01-09T00:08:50.000Z"><a href="/2017/01/08/Lua-MongoDB-QuickStart/">2017-01-08</a></time>
      
      
  
    <h1 class="title"><a href="/2017/01/08/Lua-MongoDB-QuickStart/">Lua MongoDB QuickStart</a></h1>
  

    </header>
    <div class="entry">
      
      
        <p>Here is the tutorial to write and build Lua application that can communicate with MongoDB database.</p>
<h2 id="Dependency-Installation"><a href="#Dependency-Installation" class="headerlink" title="Dependency Installation"></a>Dependency Installation</h2><p>At first, we need to install LuaRocks. Here is the <a href="http://yular.github.io/2017/01/08/LuaRocks-QuickStart/">tutorial</a>.</p>
<p>We need to install dependency to access MongoDB database through Lua. Execute the command to install dependency:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">luarocks install lua-mongo</span><br></pre></td></tr></table></figure></p>
<hr>

<h2 id="Dependency-Document"><a href="#Dependency-Document" class="headerlink" title="Dependency Document"></a>Dependency Document</h2><p>Here is <a href="https://github.com/neoxic/lua-mongo/blob/master/doc/main.md" target="_blank" rel="external">the link of document</a> and <a href="https://github.com/neoxic/lua-mongo" target="_blank" rel="external">its Github</a>.</p>
<h2 id="Sample-Code"><a href="#Sample-Code" class="headerlink" title="Sample Code"></a>Sample Code</h2><p>Below is the sample code to do MongoDB query. The file name is mongoDB.lua:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">local</span> mongo = require(<span class="string">'mongo'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">local</span> client = mongo.Client <span class="string">'mongodb://host_ip:port'</span></span><br><span class="line"><span class="built_in">local</span> database = client:getDatabase(<span class="string">'database_name'</span>)</span><br><span class="line"><span class="built_in">local</span> collection = database:getCollection(<span class="string">'table_name'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">local</span> query = mongo.BSON <span class="string">'&#123; "id" : &#123; "$gt" : "0" &#125; &#125;'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> document <span class="keyword">in</span> collection:find(query):iterator()</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span>(document.id, document.name)</span><br><span class="line">end</span><br></pre></td></tr></table></figure></p>
<p>Then execute above lua script using following command:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lua mongoDB.lua</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">Share</a>
        </div>
        
        
  
  <div class="tags">
    <a href="/tags/Lua/">Lua</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>






  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2017-01-09T00:08:36.000Z"><a href="/2017/01/08/Lua-MySQL-QuickStart/">2017-01-08</a></time>
      
      
  
    <h1 class="title"><a href="/2017/01/08/Lua-MySQL-QuickStart/">Lua MySQL QuickStart</a></h1>
  

    </header>
    <div class="entry">
      
      
        <p>Here is the tutorial to write and build Lua application that can communicate with MySQL database.</p>
<h2 id="Dependency-Installation"><a href="#Dependency-Installation" class="headerlink" title="Dependency Installation"></a>Dependency Installation</h2><p>At first, we need to install LuaRocks. Here is the <a href="http://yular.github.io/2017/01/08/LuaRocks-QuickStart/">tutorial</a>.</p>
<p>We need to install dependency to access MySQL database through Lua. Execute the command to install dependency:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">luarocks install luasql-mysql MYSQL_INCDIR=/usr/include/mysql/</span><br></pre></td></tr></table></figure></p>
<p>But default dependency miss some libraries or variables. In that case, we need to use different source:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">luarocks --from=http://rocks.luarocks.org/dev install luasql-mysql cvs-1 MYSQL_INCDIR=/usr/include/mysql</span><br></pre></td></tr></table></figure></p>
<hr>

<h2 id="Sample-Code"><a href="#Sample-Code" class="headerlink" title="Sample Code"></a>Sample Code</h2><p>Below is the sample code to do MySQL query. The file name is mysql.lua:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">luasql = require <span class="string">"luasql.mysql"</span></span><br><span class="line">env = assert (luasql.mysql())</span><br><span class="line">con = assert (env:connect(<span class="string">"database_name"</span>,<span class="string">"user_name"</span>,<span class="string">"password"</span>,<span class="string">"host_ip"</span>,port))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(env,con)</span><br><span class="line"></span><br><span class="line">cur,errorString = con:execute([[select * from <span class="built_in">test</span>;]])</span><br><span class="line"><span class="built_in">print</span>(cur,errorString )</span><br><span class="line"></span><br><span class="line">row = cur:fetch (&#123;&#125;, <span class="string">"a"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> row <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span>(string.format(<span class="string">"Id: %s "</span>, row.id))</span><br><span class="line">    row = cur:fetch (row, <span class="string">"a"</span>)</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">cur:close()</span><br><span class="line">con:close()</span><br><span class="line">env:close()</span><br></pre></td></tr></table></figure></p>
<p>Then execute above lua script using following command:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lua mysql.lua</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">Share</a>
        </div>
        
        
  
  <div class="tags">
    <a href="/tags/Lua/">Lua</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>






  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2017-01-09T00:08:02.000Z"><a href="/2017/01/08/LuaRocks-QuickStart/">2017-01-08</a></time>
      
      
  
    <h1 class="title"><a href="/2017/01/08/LuaRocks-QuickStart/">LuaRocks QuickStart</a></h1>
  

    </header>
    <div class="entry">
      
      
        <p>Here is the <a href="https://luarocks.org/" target="_blank" rel="external">official website of LuaRocks</a>. LuaRocks is the package manager for Lua moduels, which means that we can use it to install or uninstall some specific Lua libraries like LuaMySQL and LuaMongoDB.</p>
<p>Below is the tutorial to install LuaRocks.</p>
<h2 id="Install-LuaRocks"><a href="#Install-LuaRocks" class="headerlink" title="Install LuaRocks"></a>Install LuaRocks</h2><p>Here we use Centos 7. We will install LuaRocks through command lines as follows (Here is <a href="https://luarocks.org/#quick-start" target="_blank" rel="external">official tutorial</a>):<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget https://luarocks.org/releases/luarocks-2.4.1.tar.gz</span><br><span class="line">tar zxpf luarocks-2.4.1.tar.gz</span><br><span class="line"><span class="built_in">cd</span> luarocks-2.4.1</span><br><span class="line">./configure</span><br><span class="line">sudo make bootstrap</span><br></pre></td></tr></table></figure></p>
<p>Now execute this command:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">luarocks</span><br></pre></td></tr></table></figure></p>
<p>If everythings goes well, we can similar output as below:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">LuaRocks 2.4.1, a module deployment system <span class="keyword">for</span> Lua</span><br><span class="line"></span><br><span class="line">NAME</span><br><span class="line">        /usr/<span class="built_in">local</span>/bin/luarocks - LuaRocks main <span class="built_in">command</span>-line interface</span><br><span class="line"></span><br><span class="line">SYNOPSIS</span><br><span class="line">        /usr/<span class="built_in">local</span>/bin/luarocks [--from=&lt;server&gt; | --only-from=&lt;server&gt;] [--to=&lt;tree&gt;] [VAR=VALUE]... &lt;<span class="built_in">command</span>&gt; [&lt;argument&gt;] </span><br><span class="line"></span><br><span class="line">GENERAL OPTIONS</span><br><span class="line">        These apply to all commands, as appropriate:</span><br><span class="line"></span><br><span class="line">        --server=&lt;server&gt;      Fetch rocks/rockspecs from this server</span><br><span class="line">                               (takes priority over config file)</span><br><span class="line">        --only-server=&lt;server&gt; Fetch rocks/rockspecs from this server only</span><br><span class="line">                               (overrides any entries <span class="keyword">in</span> the config file)</span><br><span class="line">        --only-sources=&lt;url&gt;   Restrict downloads to paths matching the</span><br><span class="line">                               given URL.</span><br><span class="line">        --tree=&lt;tree&gt;          Which tree to operate on.</span><br><span class="line">        --local                Use the tree <span class="keyword">in</span> the user<span class="string">'s home directory.</span><br><span class="line">                               To enable it, see '</span>/usr/<span class="built_in">local</span>/bin/luarocks <span class="built_in">help</span> path<span class="string">'.                     </span><br><span class="line">        --verbose              Display verbose output of commands executed.                               </span><br><span class="line">        --timeout=&lt;seconds&gt;    Timeout on network operations, in seconds.                                 </span><br><span class="line">                               0 means no timeout (wait forever).                                         </span><br><span class="line">                               Default is 30.                                                             </span><br><span class="line">                                                                                                          </span><br><span class="line">VARIABLES                                                                                                 </span><br><span class="line">        Variables from the "variables" table of the configuration file                                    </span><br><span class="line">        can be overriden with VAR=VALUE assignments. </span><br><span class="line"></span><br><span class="line">...</span></span><br></pre></td></tr></table></figure></p>
<hr>

<h2 id="Install-LuaSocket"><a href="#Install-LuaSocket" class="headerlink" title="Install LuaSocket"></a>Install LuaSocket</h2><p>Now we will try to install LuaSocket through LuaRocks. Note that we may need to use sudo command but luarocks may not be identified by sudo. In that case, we can use root user to execute luarocks command:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">su root</span><br><span class="line">luarocks install luasocket</span><br></pre></td></tr></table></figure></p>
<p>To check that luasocket whether is installed successfully or not, we can enter lua shell and type:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">require <span class="string">"socket"</span></span><br></pre></td></tr></table></figure></p>
<p>The output returned by command should be similar as follows:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; require <span class="string">"socket"</span></span><br><span class="line">table: 0x1<span class="built_in">cd</span>8060</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">Share</a>
        </div>
        
        
  
  <div class="tags">
    <a href="/tags/Lua/">Lua</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>






  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-12-30T09:19:53.000Z"><a href="/2016/12/30/Apache-Jena-QuickStart/">2016-12-30</a></time>
      
      
  
    <h1 class="title"><a href="/2016/12/30/Apache-Jena-QuickStart/">Apache Jena QuickStart</a></h1>
  

    </header>
    <div class="entry">
      
      
        <p>Here is the tutorial to install Apache Jena on CentOS. This is the official website of <a href="https://jena.apache.org/index.html" target="_blank" rel="external">Apache Jena</a>, <a href="https://jena.apache.org/tutorials/" target="_blank" rel="external">official tutorial</a> and <a href="https://jena.apache.org/getting_started/" target="_blank" rel="external">get started document</a>.</p>
<h2 id="Download-Apache-Jena"><a href="#Download-Apache-Jena" class="headerlink" title="Download Apache Jena"></a>Download Apache Jena</h2><p>Download Apache Jena from this <a href="https://jena.apache.org/download/index.cgi" target="_blank" rel="external">link</a>. Here we use Apache Jena 3.1.1. So we should download this file: apache-jena-3.1.1.tar.gz.</p>
<p>Extract the software from tar ball and move them to /usr/local:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar xvzf apache-jena-3.1.1.tar.gz</span><br><span class="line">mv apache-jena-3.1.1 /usr/<span class="built_in">local</span>/</span><br></pre></td></tr></table></figure></p>
<h2 id="Set-Environment-PATH"><a href="#Set-Environment-PATH" class="headerlink" title="Set Environment PATH"></a>Set Environment PATH</h2><p>Edit ~/.bashrc file and put following content in that file:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JENAROOT=/usr/<span class="built_in">local</span>/apache-jena-3.1.1</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JENAROOT</span>/bin</span><br></pre></td></tr></table></figure></p>
<p>Then execute this command:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure></p>
<h2 id="Test"><a href="#Test" class="headerlink" title="Test"></a>Test</h2><p>Now try this command:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sparql --version</span><br></pre></td></tr></table></figure></p>
<p>The output should be similar as follows:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Jena:       VERSION: 3.1.1</span><br><span class="line">Jena:       BUILD_DATE: 2016-11-04T18:59:20+0000</span><br><span class="line">ARQ:        VERSION: 3.1.1</span><br><span class="line">ARQ:        BUILD_DATE: 2016-11-04T18:59:20+0000</span><br><span class="line">RIOT:       VERSION: 3.1.1</span><br><span class="line">RIOT:       BUILD_DATE: 2016-11-04T18:59:20+0000</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">Share</a>
        </div>
        
        
  
  <div class="tags">
    <a href="/tags/SparkSQL/">SparkSQL</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>






  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-12-30T09:19:20.000Z"><a href="/2016/12/30/Kotlin-QuickStart/">2016-12-30</a></time>
      
      
  
    <h1 class="title"><a href="/2016/12/30/Kotlin-QuickStart/">Kotlin QuickStart</a></h1>
  

    </header>
    <div class="entry">
      
      
        <p>Kotlin is a kind of statically typed programming language for the JVM, Android and the browser. Here is the official <a href="https://Kotlinlang.org" target="_blank" rel="external">website</a>.</p>
<p>It has a lot of advantages and we can find them on the official website above. We can write a Kotlin script and then compile and build it as a java jar or java script file to execute. See the <a href="https://en.wikipedia.org/wiki/Kotlin_(programming_language" target="_blank" rel="external">wikipedia</a>).</p>
<p>Below is a quickstart guide to build a Kotlin script as a java jar, which is similar to the official <a href="https://Kotlinlang.org/docs/tutorials/" target="_blank" rel="external">tutorial</a>.</p>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><p>Here is the <a href="https://kotlinlang.org/docs/tutorials/command-line.html" target="_blank" rel="external">official tutorial</a> to install Kotlin compiler in the OS. We use Centos 7 in this tutorial.</p>
<p>To manual install the compiler, just download it from <a href="https://github.com/JetBrains/kotlin/releases/tag/v1.0.5-2" target="_blank" rel="external">Github Release</a>. Then unzip it through this command:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip kotlin-compiler-1.0.5-2.zip</span><br></pre></td></tr></table></figure></p>
<p>Note that current latest version is 1.0.5. The approach for all the other versions.</p>
<p>Then move the folder to the location we would like to store this compiler and add the bin to PATH variable.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mv kotlinc /usr/<span class="built_in">local</span>/kotlinc</span><br></pre></td></tr></table></figure></p>
<p>Edit ~/.bashrc adding/modifying following lines<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> KOTLINC=/usr/<span class="built_in">local</span>/kotlinc</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$KOTLINC</span>/bin</span><br></pre></td></tr></table></figure></p>
<p>Remember to execute after modification is done.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure></p>
<p>Now let us type following command:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kotlin -help</span><br></pre></td></tr></table></figure></p>
<p>The output should similar as follows:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">kotlin: run Kotlin programs, scripts or REPL.</span><br><span class="line"></span><br><span class="line">Usage: kotlin &lt;options&gt; &lt;<span class="built_in">command</span>&gt; &lt;arguments&gt;</span><br><span class="line"><span class="built_in">where</span> <span class="built_in">command</span> may be one of:</span><br><span class="line">  foo.Bar                    Runs the <span class="string">'main'</span> <span class="keyword">function</span> from the class with the given qualified name</span><br><span class="line">  app.jar                    Runs the given JAR file as <span class="string">'java -jar'</span> would <span class="keyword">do</span></span><br><span class="line">                             (-classpath argument is ignored and no Kotlin runtime is added to the classpath)</span><br><span class="line">and possible options include:</span><br><span class="line">  -classpath (-cp) &lt;path&gt;    Paths <span class="built_in">where</span> to find user class files</span><br><span class="line">  -Dname=value               Set a system JVM property</span><br><span class="line">  -J&lt;option&gt;                 Pass an option directly to JVM</span><br><span class="line">  -no-reflect                Don<span class="string">'t include Kotlin reflection implementation into classpath</span><br><span class="line">  -version                   Display Kotlin version</span><br><span class="line">  -help (-h)                 Print a synopsis of options</span></span><br></pre></td></tr></table></figure></p>
<hr>

<h2 id="Hello-World-Application"><a href="#Hello-World-Application" class="headerlink" title="Hello, World Application"></a>Hello, World Application</h2><p>Here is the <a href="https://kotlinlang.org/docs/tutorials/command-line.html" target="_blank" rel="external">official tutorial</a>.</p>
<p>Add a new file called hello.kt and below is the content:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">    println(<span class="string">"Hello, World!"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Compile above application using Kotlinc compiler to a java jar:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kotlinc hello.kt -include-runtime <span class="_">-d</span> hello.jar</span><br></pre></td></tr></table></figure></p>
<p>Note that -include-runtime option makes the resulting .jar file self-contained and runnable by including the Kotlin runtime library in it. -d option indicates what we want the output of the compiler to be called and may be either a directory name for class files or a .jar file name.</p>
<p>Now run the application:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar hello.jar</span><br></pre></td></tr></table></figure></p>
<p>The output should be as follows:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello, World!</span><br></pre></td></tr></table></figure></p>
<hr>

<h2 id="Basic-Syntax"><a href="#Basic-Syntax" class="headerlink" title="Basic Syntax"></a>Basic Syntax</h2><p>Here is the <a href="https://kotlinlang.org/docs/reference/basic-syntax.html" target="_blank" rel="external">offical tutorial</a> about the basic/common used syntax in Kotlin.</p>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">Share</a>
        </div>
        
        
  
  <div class="tags">
    <a href="/tags/Kotlin/">Kotlin</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>






  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-07-23T06:12:23.000Z"><a href="/2016/07/22/HBase-Pre-split-Quickstart/">2016-07-22</a></time>
      
      
  
    <h1 class="title"><a href="/2016/07/22/HBase-Pre-split-Quickstart/">HBase Pre-split Quickstart</a></h1>
  

    </header>
    <div class="entry">
      
      
        <p>Here are some articles regarding pre-split regions in HBase table: <a href="http://hortonworks.com/blog/apache-hbase-region-splitting-and-merging/" target="_blank" rel="external">Hortonworks</a> and <a href="http://hbase.apache.org/book.html#datamodel" target="_blank" rel="external">HBase org</a>.</p>
<p>Before we load data to HBase, we may have to do pre-split on the HBase table storing the data. The reason is that by default, for each HBase table, HBase will save all its data into one region server until its space is used up. This may cause protential hotspoting issue if there are HBase tables that receive most of the queries. Without good pre-spliting strategy, we may fail to use all HBase clusters and some machines may crash as result of overload.</p>
<p>Here is the HBase shell command to create HBase tables with pre-split:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create <span class="string">'table name'</span>, <span class="string">'column family'</span>, splits =&gt; [<span class="string">'region1_name'</span>, <span class="string">'region2_name'</span>, ..., <span class="string">'regionN_name'</span>]</span><br></pre></td></tr></table></figure></p>
<p>To save data into specific regions, we could use existing split policy or design a new one. Below is a sample command to use HBase split policy:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter <span class="string">'table name'</span>, &#123;NAME =&gt; <span class="string">'column family'</span>, BLOCKSIZE =&gt; <span class="string">'32768'</span>, CONFIGURATION =&gt; &#123;<span class="string">'SPLIT_POLICY'</span> =&gt; <span class="string">'org.apache.hadoop.hbase.regionserver.ConstantSizeRegionSplitPolicy'</span>, <span class="string">'hbase.hregion.max.filesize'</span>=&gt;<span class="string">'10737418240'</span>&#125;&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">Share</a>
        </div>
        
        
  
  <div class="tags">
    <a href="/tags/Cloud-Computing/">Cloud Computing</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>






  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-07-23T06:09:57.000Z"><a href="/2016/07/22/scala-sbt-tool-quickstart/">2016-07-22</a></time>
      
      
  
    <h1 class="title"><a href="/2016/07/22/scala-sbt-tool-quickstart/">scala sbt tool quickstart</a></h1>
  

    </header>
    <div class="entry">
      
      
        
      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">Share</a>
        </div>
        
        
        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>






  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-07-23T06:09:34.000Z"><a href="/2016/07/22/Compile-scala-to-java-jar-tutorial/">2016-07-22</a></time>
      
      
  
    <h1 class="title"><a href="/2016/07/22/Compile-scala-to-java-jar-tutorial/">Compile scala to java jar tutorial</a></h1>
  

    </header>
    <div class="entry">
      
      
        
      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">Share</a>
        </div>
        
        
        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>







<nav id="pagination">
  
  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/9/">&laquo; Vorherige Seite</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><a class="page-number" href="/page/12/">12</a><span class="space">&hellip;</span><a class="page-number" href="/page/24/">24</a><a class="extend next" rel="next" href="/page/11/">Nchste Seite &raquo;</a>
  </nav>

</nav>
</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Google Search">
    <input type="hidden" name="q" value="">
  </form>
</div>

<div class="search">
   <form class="search" action="/search/index.html" method="get" accept-charset="utf-8">
     <input type="search" id="search" class="st-default-search-input" style="height:40px" maxlength="20" placeholder="WebSite Search" />
     <input type="hidden" name="q" value="">
   </form>
</div>



  
  <div class="widget tag">
    <h3 class="title">Archive</h3>
    <div class="entry">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">February 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a></li></ul>
    </div>
  </div>



  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/Algorithm/">Algorithm</a><small>31</small></li>
  
    <li><a href="/tags/Android/">Android</a><small>1</small></li>
  
    <li><a href="/tags/Bit-Manipulation/">Bit Manipulation</a><small>1</small></li>
  
    <li><a href="/tags/BitCoin/">BitCoin</a><small>1</small></li>
  
    <li><a href="/tags/Business-Model/">Business Model</a><small>1</small></li>
  
    <li><a href="/tags/C/">C</a><small>4</small></li>
  
    <li><a href="/tags/C/">C++</a><small>2</small></li>
  
    <li><a href="/tags/Cloud-Computing/">Cloud Computing</a><small>29</small></li>
  
    <li><a href="/tags/Combinatorics/">Combinatorics</a><small>1</small></li>
  
    <li><a href="/tags/Data-Analysis/">Data Analysis</a><small>1</small></li>
  
    <li><a href="/tags/Database/">Database</a><small>10</small></li>
  
    <li><a href="/tags/Design-Pattern/">Design Pattern</a><small>3</small></li>
  
    <li><a href="/tags/Finance/">Finance</a><small>1</small></li>
  
    <li><a href="/tags/Graph-Theory/">Graph Theory</a><small>1</small></li>
  
    <li><a href="/tags/IOS/">IOS</a><small>1</small></li>
  
    <li><a href="/tags/Interview-Summary/">Interview Summary</a><small>2</small></li>
  
    <li><a href="/tags/Java/">Java</a><small>37</small></li>
  
    <li><a href="/tags/Javascript/">Javascript</a><small>1</small></li>
  
    <li><a href="/tags/Kotlin/">Kotlin</a><small>1</small></li>
  
    <li><a href="/tags/Life/">Life</a><small>6</small></li>
  
    <li><a href="/tags/Life-Thoughts/">Life Thoughts</a><small>1</small></li>
  
    <li><a href="/tags/Linux/">Linux</a><small>12</small></li>
  
    <li><a href="/tags/Lua/">Lua</a><small>8</small></li>
  
    <li><a href="/tags/Mac/">Mac</a><small>1</small></li>
  
    <li><a href="/tags/Machine-Learning/">Machine Learning</a><small>11</small></li>
  
    <li><a href="/tags/Natural-Language-Processing/">Natural Language Processing</a><small>1</small></li>
  
    <li><a href="/tags/Python/">Python</a><small>4</small></li>
  
    <li><a href="/tags/R/">R</a><small>1</small></li>
  
    <li><a href="/tags/Redis/">Redis</a><small>1</small></li>
  
    <li><a href="/tags/Ruby/">Ruby</a><small>2</small></li>
  
    <li><a href="/tags/Software-Development/">Software Development</a><small>12</small></li>
  
    <li><a href="/tags/SparkSQL/">SparkSQL</a><small>1</small></li>
  
    <li><a href="/tags/String/">String</a><small>1</small></li>
  
    <li><a href="/tags/System-Design/">System Design</a><small>10</small></li>
  
    <li><a href="/tags/Test/">Test</a><small>5</small></li>
  
    <li><a href="/tags/Tools/">Tools</a><small>4</small></li>
  
    <li><a href="/tags/Web/">Web</a><small>17</small></li>
  
  </ul>
</div>


  
<div class="widget tagcloud">
  <h3 class="title">Tag-Cloud</h3>
  <div class="entry">
    <a href="/tags/Algorithm/" style="font-size: 19.23px;">Algorithm</a> <a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/Bit-Manipulation/" style="font-size: 10px;">Bit Manipulation</a> <a href="/tags/BitCoin/" style="font-size: 10px;">BitCoin</a> <a href="/tags/Business-Model/" style="font-size: 10px;">Business Model</a> <a href="/tags/C/" style="font-size: 12.31px;">C</a> <a href="/tags/C/" style="font-size: 10.77px;">C++</a> <a href="/tags/Cloud-Computing/" style="font-size: 18.46px;">Cloud Computing</a> <a href="/tags/Combinatorics/" style="font-size: 10px;">Combinatorics</a> <a href="/tags/Data-Analysis/" style="font-size: 10px;">Data Analysis</a> <a href="/tags/Database/" style="font-size: 15.38px;">Database</a> <a href="/tags/Design-Pattern/" style="font-size: 11.54px;">Design Pattern</a> <a href="/tags/Finance/" style="font-size: 10px;">Finance</a> <a href="/tags/Graph-Theory/" style="font-size: 10px;">Graph Theory</a> <a href="/tags/IOS/" style="font-size: 10px;">IOS</a> <a href="/tags/Interview-Summary/" style="font-size: 10.77px;">Interview Summary</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Javascript/" style="font-size: 10px;">Javascript</a> <a href="/tags/Kotlin/" style="font-size: 10px;">Kotlin</a> <a href="/tags/Life/" style="font-size: 13.85px;">Life</a> <a href="/tags/Life-Thoughts/" style="font-size: 10px;">Life Thoughts</a> <a href="/tags/Linux/" style="font-size: 16.92px;">Linux</a> <a href="/tags/Lua/" style="font-size: 14.62px;">Lua</a> <a href="/tags/Mac/" style="font-size: 10px;">Mac</a> <a href="/tags/Machine-Learning/" style="font-size: 16.15px;">Machine Learning</a> <a href="/tags/Natural-Language-Processing/" style="font-size: 10px;">Natural Language Processing</a> <a href="/tags/Python/" style="font-size: 12.31px;">Python</a> <a href="/tags/R/" style="font-size: 10px;">R</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/Ruby/" style="font-size: 10.77px;">Ruby</a> <a href="/tags/Software-Development/" style="font-size: 16.92px;">Software Development</a> <a href="/tags/SparkSQL/" style="font-size: 10px;">SparkSQL</a> <a href="/tags/String/" style="font-size: 10px;">String</a> <a href="/tags/System-Design/" style="font-size: 15.38px;">System Design</a> <a href="/tags/Test/" style="font-size: 13.08px;">Test</a> <a href="/tags/Tools/" style="font-size: 12.31px;">Tools</a> <a href="/tags/Web/" style="font-size: 17.69px;">Web</a>
  </div>
</div>


  

  <div class="widget tag">
  <h3 class="title">Friend Links</h3>
  <ul class="entry">
    <li><a href="http://blog.haosdent.me/"  target="_blank">Haosong Huang's Blog</a></li>
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">Recent Posts</h3>
  <ul class="entry">
    
      <li>
        <a href="/2018/05/10/Thinking-in-Ops-Readiness/">Thinking in Ops Readiness</a>
      </li>
    
      <li>
        <a href="/2018/03/26/Reading-Note-of-Patterns-of-Enterprise-Application-Architecture-II/">Reading Note of Patterns of Enterprise Application Architecture II</a>
      </li>
    
      <li>
        <a href="/2018/03/26/Reading-Note-of-Patterns-of-Enterprise-Application-Architecture-I/">Reading Note of Patterns of Enterprise Application Architecture I</a>
      </li>
    
      <li>
        <a href="/2018/03/12/BitCoin-Information-Summary/">BitCoin Information Summary</a>
      </li>
    
      <li>
        <a href="/2018/02/25/Reading-Note-of-Working-Effectively-with-Legacy-Code-IV/">Reading Note of Working Effectively with Legacy Code IV</a>
      </li>
    
  </ul>
</div>



  <div id="recentcomments" class="widget tag">
    <h3 class="title">Recent Comments</h3>
    <div class="entry">
      <div id="recentcomments" class="dsq-widget">
        <script type="text/javascript" src="http://yular.disqus.com/recent_comments_widget.js?num_items=10&hide_avatars=1&avatar_size=32&excerpt_length=100&hide_mods=0"></script>
      </div>
    </div>
</div>


  
  <div class="widget tag">
    <h3 class="title">Popular Posts</h3>
    <div class="widget">
      <ul class="popularlist">
      </ul>
    </div>
  </div>



  <div class="widget tag">
  <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <h3 class="title">Statics</h3>
  <ul class="entry">   
    <li><span id="busuanzi_container_site_pv">Total Visits: <span id="busuanzi_value_site_pv"></span></span></li>
    <li><span id="busuanzi_container_site_uv">Total Visitors: <span id="busuanzi_value_site_uv"></span></span></li>
  </div>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  <p>
  
  &copy; 2018 BaiChuan Yang
  
  All rights reserved.</p>
  <p>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></p>
</div>
<div class="alignright">
   <div style="font-family: FontAwesome;font-size: 20px;">
     <a href="http://weibo.com/u/5854007817?is_all=1" title="weibo" target="_blank"><img src="/css/images/weibo-social-logo.png"></a>&nbsp;
     <a href="https://www.facebook.com/johnson.green.338" title="Facebook" target="_blank"><img src="/css/images/facebook-logo.png"></a>&nbsp;
     <a href="https://twitter.com/JohnsonGreen5" title="twitter" target="_blank"><img src="/css/images/twitter-logo.png"></a>&nbsp;
     <a href="https://www.linkedin.com/in/baichuan-yang-6b7b6579" title="LinkedIn" target="_blank"><img src="/css/images/linkedin-logo.png"></a>&nbsp;
     <a href="https://github.com/yular" title="GitHub" target="_blank"><img src="/css/images/github-sign.png"></a>&nbsp;
     <a href="https://plus.google.com/u/0/+BaichuanYANG/" title="Google+" target="_blank"><img src="/css/images/social-google-plus-square-button.png"></a>
  </div>
</div>
<div class="clearfix"></div>

<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
</footer>
  <script src="/js/jquery-1.12.1.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



    <script type="text/javascript">
    var disqus_shortname = 'yular';

    (function(){
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
    </script>


<div id="totop" style="position:fixed;bottom:150px;right:50px;cursor: pointer;">
<a title="backtotop"><img src="/imgs/scrollup.png"/></a>
</div>

<script src="/js/totop.js"></script>

<script src="/js/popular_posts.js"></script>

<div id='bg'></div>


</body>
</html>