
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>YBC HomePage</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Blog mainly about IT technology and Interesting Life Events~">
<meta property="og:type" content="website">
<meta property="og:title" content="YBC HomePage">
<meta property="og:url" content="http://yular.github.io/page/14/index.html">
<meta property="og:site_name" content="YBC HomePage">
<meta property="og:description" content="Blog mainly about IT technology and Interesting Life Events~">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="YBC HomePage">
<meta name="twitter:description" content="Blog mainly about IT technology and Interesting Life Events~">
  
    <link rel="alternative" href="/atom.xml" title="YBC HomePage" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
</head>
<body>
<div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">YBC HomePage</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Study~ Work~ Life~ Everything is here~</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" class="search-form">
          <input type="search" name="word" maxlength="20" class="search-form-input" placeholder="Search">
          <input type="submit" value="" class="search-form-submit">
          <input name=tn type=hidden value="bds">
          <input name=cl type=hidden value="3">
          <input name=ct type=hidden value="2097152">
          <input type="hidden" name="si" value="yular.github.io">
        </form>
      </div>
    </div>
  </div>
</header>
    <div class="outer">
      <section id="main">
  
    <article id="post-Bootstrap-CSS-Grid-System-Summary" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/02/28/Bootstrap-CSS-Grid-System-Summary/" class="article-date">
  <time datetime="2016-02-28T11:34:34.000Z" itemprop="datePublished">2016-02-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/02/28/Bootstrap-CSS-Grid-System-Summary/">Bootstrap CSS Grid System Summary</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Here is the definition of Bootstrap grid system from its official document:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Bootstrap includes a responsive, mobile first fluid grid system that appropriately scales up to 12 columns as the device or viewport size increases. </span><br><span class="line">It includes predefined classes for easy layout options, as well as powerful mixins for generating more semantic layouts.</span><br></pre></td></tr></table></figure></p>
<p>Bootstrap grid system has a three levels structure for creating page layout and these levels are (from highest to lowest): container, row and column. We can put the content like form, button, panel and table into the columns so that all the page elements are put into the places as we want. Besides, column level can be nested through adding rows and then columns into it but we do not put container into rows or columns.</p>
<p>Here is the instruction about how to use Bootstrap grid system:<br>
        
          <p class="article-more-link">
            <a href="/2016/02/28/Bootstrap-CSS-Grid-System-Summary/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yular.github.io/2016/02/28/Bootstrap-CSS-Grid-System-Summary/" data-id="ck5ju04pr001aolkpgghmvlq4" class="article-share-link" data-share="baidu" data-title="Bootstrap CSS Grid System Summary">分享到</a>
      

      
        <a href="http://yular.github.io/2016/02/28/Bootstrap-CSS-Grid-System-Summary/#ds-thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Web/">Web</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-CDN-online-libraries-for-Web-Developers" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/02/28/CDN-online-libraries-for-Web-Developers/" class="article-date">
  <time datetime="2016-02-28T04:13:17.000Z" itemprop="datePublished">2016-02-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/02/28/CDN-online-libraries-for-Web-Developers/">CDN online libraries for Web Developers</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Sometimes when we read web page HTML code, we may see the following stuffs:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"https://cdnjs.cloudflare.com/ajax/libs/angular.js/2.0.0-beta.7/angular2.min.js"</span> &gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>If we paste the link of the src attribute to the browser, we will see the source code of that angular js file. That means we can access the library from Internet resource without download it to our project folder: thus we can save more disk space!</p>
<p>Here are links of the three of the main CDN services that web developers use for the project.<br>1.cdnjs.com<br><a href="https://cdnjs.com/" target="_blank" rel="external">Click Here</a>.<br><img src="https://c2.staticflickr.com/2/1662/25058960300_17505675c9_b.jpg" alt="cdnjs homepage"></p>
<p>2.JSDELIVR<br><a href="https://www.jsdelivr.com/" target="_blank" rel="external">Click Here</a>.<br><img src="https://c2.staticflickr.com/2/1528/24986975619_952eb0e490_b.jpg" alt="JSDELIVR homepage"></p>
<p>3.Google APIs<br><a href="https://developers.google.com/speed/libraries/" target="_blank" rel="external">Click Here</a>.<br><img src="https://c2.staticflickr.com/2/1572/25236359982_7f8b220ccc_b.jpg" alt="Google APIs"></p>
<p>4.Bootstrap CDN<br><a href="https://www.bootstrapcdn.com/" target="_blank" rel="external">Click Here</a>.<br><img src="https://c2.staticflickr.com/2/1604/25139383580_d31866c6c7_b.jpg" alt="Bootstrap CDN"></p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yular.github.io/2016/02/28/CDN-online-libraries-for-Web-Developers/" data-id="ck5ju04pv001lolkpv3l6o80r" class="article-share-link" data-share="baidu" data-title="CDN online libraries for Web Developers">分享到</a>
      

      
        <a href="http://yular.github.io/2016/02/28/CDN-online-libraries-for-Web-Developers/#ds-thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Web/">Web</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Thinking-in-Dynamic-Programming-Algorithm" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/02/21/Thinking-in-Dynamic-Programming-Algorithm/" class="article-date">
  <time datetime="2016-02-21T14:08:08.000Z" itemprop="datePublished">2016-02-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/02/21/Thinking-in-Dynamic-Programming-Algorithm/">Thinking in Dynamic Programming Algorithm</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This summary is more for algorithm contest but it should be also useful for solving industry problems because sometimes we can simply a real world problem to a ideal mathematical problem with some appropriate constraints.</p>
<p>Dynamic programming algorithm is widely used in computer science and it helps people to solve various problems efficiently. The basic idea behind dynamic programming algorithm is to save the result of previous steps into a table(s) so that if the result of current step depends on previous ones, then the algorithm can retrieve these historic results immediately and apply them to the computation in current step. This is very important because with the help of this table, algorithm does not need to recompute the results of previous steps which may increase the time complexity greatly. That is the reason why dynamic programming algorithm is usually more efficient than navie brute force search algorithm but will provide correct result or optimization solution than heuristic search. However, of course dynamic programming algorithm usually consume more memory than less efficient algorithms. Usually, we call the computation result of previous steps “solution of subproblems” because the result of current step (global problem) is based on them and with iteration continues, all the current steps will become subproblems of future steps. Note that a problem that has subproblems structure means that it can be recursively divided into problems in smaller scale and those subproblems in the same level are independent with each other, and solution of the problem with higher level depends on its subproblems instead of those have higher level.</p>
<p>To design an efficient dynamic programming algorithm, the key thing is to figure out the dynamic programming formula. With the given formula, the algorithm will iteratively compute the result of current step based on the result of previous steps saved in tables. So in the formula, we should provide base case initially to start the iterative computation. Here is an example. In Fibonacci sequence, the first and second elements are both one, and for every ith element where i &gt; 2, A[i] = A[i - 1] + A[i - 2]. Obviously, we can use dynamic programming algorithm to compute the value of ith element of this sequence. Thus, we can design the dynamic programming formula as follows:<br>                dp[i] = 1 if i &lt;= 2;<br>                dp[i] = dp[i - 1] + dp[i - 2] if i &gt; 2<br>We save the value of every ith element into an array used as a table mentioned above and we can get the ith element with only O(n) time complexity. Note that different dynamic programming formula will lead to different time complexity or different space complexity. Even with the same dynamic programming algorithm formula, different data structure or different algorithms to retrieve historic results will make the original dynamic programming algorithm more/less efficient.</p>
<p>Dynamic programming algorithm is not the silver bullet but it is one of the best choices for some specific variety of problems. In my eye, these kinds of problems include optimization problem such as find the maximum value or minmum cost of given situation, and the counting problem like counting the number of times of specific case showing up in the problem. In most of time, the given problem can be solved in navie brute force search algorithm with O(n!) or O(2^n) or O(n^C) where C is a large constant time complexity. But if we use dynamic programming algorithm, sometimes we may not solve the problem in linear time complexity but the solution is feasible in practice. The classic case is the famous <a href="https://en.wikipedia.org/wiki/Knapsack_problem" target="_blank" rel="external">Knapsack problem</a>. </p>
<p>As described above, to design a good dynamic programming algorithm, we should carry out a computation efficiency dynamic programming formula. But that is not the end. After that, we should also consider following things:</p>
<ol>
<li>What kind of data structure should be used as table to save historic data?</li>
<li>What kind of query algorithm should be used to retrieve historic data if we can only used basic array as table?</li>
<li>Could we use some theorems or mathematic approaches to optimize the algorithm?<br>Actually, there will be more issues but the above are the main ones. The followings are answers to above problems.</li>
<li>The data structures include hash table (ordered_map or ordered_set or equivalent), binary index tree, segment tree, or even multi-dimensonal arrays and etc.</li>
<li>The query algorithms include binary search, hash search and etc.</li>
<li>Of course we can. Sometimes if we want to optimize an O(n!) time complexity algorithm to an O(n^2) algorithm, we may have to use some known theorems so that we can do an intelligent derivation for our formula. Sometimes we may find that there are some patterns inside the subproblems structure which is also helpful to decrease time complexity. But usually these patterns mean a new formula and thus, we may have to redesign it.</li>
</ol>
<p>Above all, here is the workflow for dynamic programming algorithm:</p>
<ol>
<li>Given a problem, consider is it a good fit for dynamic programming algorithm? Think of the subproblem structure.</li>
<li>If dynamic programming algorithm is a good choice, design the formula of it.</li>
<li>See whether we can optimize the algorithm with different data structure or table retrieve algorithm or known theorems or special subproblem patterns? If not and time complexity is not acceptable, go back to step two.</li>
</ol>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yular.github.io/2016/02/21/Thinking-in-Dynamic-Programming-Algorithm/" data-id="ck5ju04ul00c6olkpd4twy6x0" class="article-share-link" data-share="baidu" data-title="Thinking in Dynamic Programming Algorithm">分享到</a>
      

      
        <a href="http://yular.github.io/2016/02/21/Thinking-in-Dynamic-Programming-Algorithm/#ds-thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithm/">Algorithm</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-SPOJ-Problems-Solution-List-from-One-to-Fifty-Four" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/02/07/SPOJ-Problems-Solution-List-from-One-to-Fifty-Four/" class="article-date">
  <time datetime="2016-02-07T13:36:27.000Z" itemprop="datePublished">2016-02-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/02/07/SPOJ-Problems-Solution-List-from-One-to-Fifty-Four/">SPOJ Problems Solution List from One to Fifty Four</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Hash-it"><a href="#Hash-it" class="headerlink" title="Hash it!"></a>Hash it!</h3><p><a href="http://www.spoj.com/problems/HASHIT/" target="_blank" rel="external">Problem Link</a>.<br><a href="https://github.com/yular/CCplusplus-Project/blob/master/SPOJ/spoj_29_HASHIT.cpp" target="_blank" rel="external">Code Link</a>.<br>An easy implementation problem. Just follow the instruction to build the hash table and do the operation. The maximum number of collision shoud be 19 not 20.<br>实为简单的模拟题。根据题目建好哈希表并依照给定命令进行操作就好。碰撞次数是0-19。</p>
<hr>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yular.github.io/2016/02/07/SPOJ-Problems-Solution-List-from-One-to-Fifty-Four/" data-id="ck5ju04u900beolkpqqajm6cv" class="article-share-link" data-share="baidu" data-title="SPOJ Problems Solution List from One to Fifty Four">分享到</a>
      

      
        <a href="http://yular.github.io/2016/02/07/SPOJ-Problems-Solution-List-from-One-to-Fifty-Four/#ds-thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithm/">Algorithm</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Kafka-Consumer-Java-Maven-QuickStart" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/24/Kafka-Consumer-Java-Maven-QuickStart/" class="article-date">
  <time datetime="2016-01-24T15:42:59.000Z" itemprop="datePublished">2016-01-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/24/Kafka-Consumer-Java-Maven-QuickStart/">Kafka Consumer Java Maven QuickStart</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Here is a quickstart tutorial to implement a kafka consumer using Java and Maven. <a href="https://cwiki.apache.org/confluence/display/KAFKA/Consumer+Group+Example">This link</a> is the official tutorial but brand new users may find it hard to run it as the tutorial is not complete and the code has some bugs.</p>
<p>In this tutorial we use kafka 0.8.0. And the application is a multi-thread one. Note:<br>1.Provide more threads than there are partitions on the topic, some threads will never see a message.<br>2.There are more partitions than threads, then some threads will receive data from multiple partitions. In this case, there is NO guarantee about the order consumers receive messages, other than that within the partition the offsets will be sequential.<br>3.More processes/threads will cause Kafka to re-balance, possibly changing the assignment of a Partition to a Thread.</p>
        
          <p class="article-more-link">
            <a href="/2016/01/24/Kafka-Consumer-Java-Maven-QuickStart/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yular.github.io/2016/01/24/Kafka-Consumer-Java-Maven-QuickStart/" data-id="ck5ju04vg00e1olkprajo6kr2" class="article-share-link" data-share="baidu" data-title="Kafka Consumer Java Maven QuickStart">分享到</a>
      

      
        <a href="http://yular.github.io/2016/01/24/Kafka-Consumer-Java-Maven-QuickStart/#ds-thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Cloud-Computing/">Cloud Computing</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-H2O-Java-POJO-Quick-Start" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/24/H2O-Java-POJO-Quick-Start/" class="article-date">
  <time datetime="2016-01-24T15:11:31.000Z" itemprop="datePublished">2016-01-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/24/H2O-Java-POJO-Quick-Start/">H2O Java POJO Quick Start</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Here is the <a href="http://h2o-release.s3.amazonaws.com/h2o/rel-tibshirani/8/docs-website/h2o-docs/index.html#POJO%20Quick%20Start">official tutorial</a>. The tutorial below is almost the same as official one.</p>
<p>H2O allows users to convert the models they have built to a Plain Old Java Object (POJO), which can then be easily deployed within their Java app and scheduled to run on a specified dataset.</p>
        
          <p class="article-more-link">
            <a href="/2016/01/24/H2O-Java-POJO-Quick-Start/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yular.github.io/2016/01/24/H2O-Java-POJO-Quick-Start/" data-id="ck5ju04qh002volkpjty2h1qm" class="article-share-link" data-share="baidu" data-title="H2O Java POJO Quick Start">分享到</a>
      

      
        <a href="http://yular.github.io/2016/01/24/H2O-Java-POJO-Quick-Start/#ds-thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Machine-Learning/">Machine Learning</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Thinking-in-Divide-and-Conquer" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/24/Thinking-in-Divide-and-Conquer/" class="article-date">
  <time datetime="2016-01-24T06:55:50.000Z" itemprop="datePublished">2016-01-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/24/Thinking-in-Divide-and-Conquer/">Thinking in Divide and Conquer</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Divide and Conquer algorithm is widely used in our daily life and computer science. Many well-known algorithms adopt this idea and they include Merge-Sort, Quick-Sort and so on.</p>
<p>The basic idea of divide and conquer algorithm is to divide the original  problem into sub problems in scale. The division process continues until no available or legal sub problems can be found. Then we solve each of this sub problems, combine the sub prolems into a larger problems and solve these problems again. This process continue until we reach back to our original problem. To solve the problems that are formed by multiple sub problems, we have to consider these two cases: the solution for their sub problems and the one for the boundary of sub problems. The most tricky thing of divide and conquer is to find an efficient way to solve the problem raised from the boundary of its sub problems.</p>
<p>Usually the time complexity of divide and conquer is O(nlgn) because in each iteration, we divide the problem into two sub problems which will lead to lgn times of iteration; and in each iteration, we have to go through all the sub problems once (in best case but not always); so the total time complexity is O(n * lgn).</p>
<p>We often use recursion in divide and conquer. But it will consume more memory usually. So in some memory limited cases, we can use iterative approach in this algorithm.</p>
<p>In the future, I will recommend some problems that can be solved using divide and conquer. GL &amp;&amp; HF!</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yular.github.io/2016/01/24/Thinking-in-Divide-and-Conquer/" data-id="ck5ju04uk00c4olkpwidga2wy" class="article-share-link" data-share="baidu" data-title="Thinking in Divide and Conquer">分享到</a>
      

      
        <a href="http://yular.github.io/2016/01/24/Thinking-in-Divide-and-Conquer/#ds-thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithm/">Algorithm</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Kafka-Running-Multi-broker-Cluster-Tutorial" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/17/Kafka-Running-Multi-broker-Cluster-Tutorial/" class="article-date">
  <time datetime="2016-01-17T14:39:33.000Z" itemprop="datePublished">2016-01-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/17/Kafka-Running-Multi-broker-Cluster-Tutorial/">Kafka Running Multi-broker Cluster Tutorial</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Here is the official <a href="http://kafka.apache.org/documentation.html#quickstart">tutorial to setup a multi-broker Kafka cluster</a>. Below is our own tutorial.</p>
<p>In this tutorial, we will also setup a three-brokers Kafka cluster. To read the single broker Kafka cluster, read this <a href="http://yular.github.io/2015/09/04/Kafka-Install-and-Basic-Commands/">tutorial</a>.</p>
<p>Here we use Kafka 0.9.0.0.</p>
        
          <p class="article-more-link">
            <a href="/2016/01/17/Kafka-Running-Multi-broker-Cluster-Tutorial/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yular.github.io/2016/01/17/Kafka-Running-Multi-broker-Cluster-Tutorial/" data-id="ck5ju04rs005xolkpiwkuvfa1" class="article-share-link" data-share="baidu" data-title="Kafka Running Multi-broker Cluster Tutorial">分享到</a>
      

      
        <a href="http://yular.github.io/2016/01/17/Kafka-Running-Multi-broker-Cluster-Tutorial/#ds-thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Cloud-Computing/">Cloud Computing</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Kafka-Publisher-Java-Maven-QuickStart" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/17/Kafka-Publisher-Java-Maven-QuickStart/" class="article-date">
  <time datetime="2016-01-17T14:38:34.000Z" itemprop="datePublished">2016-01-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/17/Kafka-Publisher-Java-Maven-QuickStart/">Kafka Publisher Java Maven QuickStart</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Here is a quickstart tutorial to implement a kafka publisher using Java and Maven. <a href="https://cwiki.apache.org/confluence/display/KAFKA/0.8.0+Producer+Example" target="_blank" rel="external">This link</a> is the official tutorial but brand new users may find it hard to run it as the tutorial is not complete and the code has some bugs.</p>
<p>In this tutorial we use kafka 0.8.0.</p>
<h3 id="Create-Project-Directory"><a href="#Create-Project-Directory" class="headerlink" title="Create Project Directory"></a>Create Project Directory</h3><p>Using the following command to create a project directory<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mvn archetype:generate -DgroupId=com.yulartech.template -DartifactId=kafka-publisher -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=<span class="literal">false</span></span><br></pre></td></tr></table></figure></p>
<p>Then navigate to our project directory.</p>
<hr>

<h3 id="Edit-pom-xml-File"><a href="#Edit-pom-xml-File" class="headerlink" title="Edit pom.xml File"></a>Edit pom.xml File</h3><p>The Producer class is used to create new messages for a specific Topic and optional Partition. The following packages must be included in our project as dependencies:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import kafka.javaapi.producer.Producer;</span><br><span class="line">import kafka.producer.KeyedMessage;</span><br><span class="line">import kafka.producer.ProducerConfig;</span><br></pre></td></tr></table></figure></p>
<p>Besides, when we run our producer jar file on the kafka cluster, it will be much more convinient if we will use one-jar plugin, especially in product environment. Here is the link of <a href="http://yular.github.io/2016/01/10/Maven-Including-All-Dependencies-into-One-Jar-Using-Maven-Assemble-Plugins-Tutorial/">Java Maven One-Jar Plugin Tutorial</a>.</p>
<p>So here is the final version of our pom.xml:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">&lt;project xmlns=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> xmlns:xsi=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line">  xsi:schemaLocation=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"</span>&gt;</span><br><span class="line">  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br><span class="line"></span><br><span class="line">  &lt;groupId&gt;com.yulartech.template&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;kafka-publisher&lt;/artifactId&gt;</span><br><span class="line">  &lt;packaging&gt;jar&lt;/packaging&gt;</span><br><span class="line">  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;</span><br><span class="line">  &lt;name&gt;kafka-publisher&lt;/name&gt;</span><br><span class="line"></span><br><span class="line">  &lt;url&gt;http://maven.apache.org&lt;/url&gt;</span><br><span class="line"></span><br><span class="line">  &lt;properties&gt;</span><br><span class="line">    &lt;jdk.version&gt;1.7&lt;/jdk.version&gt;</span><br><span class="line">    &lt;kafka.version&gt;0.8.1.1&lt;/kafka.version&gt;</span><br><span class="line">    &lt;junit.version&gt;4.11&lt;/junit.version&gt;</span><br><span class="line">    &lt;maven-compiler-plugin.version&gt;2.3.2&lt;/maven-compiler-plugin.version&gt;</span><br><span class="line">    &lt;onejar-maven-plugin.version&gt;1.4.4&lt;/onejar-maven-plugin.version&gt;</span><br><span class="line">  &lt;/properties&gt;</span><br><span class="line"></span><br><span class="line">  &lt;dependencies&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">      &lt;groupId&gt;junit&lt;/groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;junit&lt;/artifactId&gt;</span><br><span class="line">      &lt;version&gt;<span class="variable">$&#123;junit.version&#125;</span>&lt;/version&gt;</span><br><span class="line">      &lt;scope&gt;<span class="built_in">test</span>&lt;/scope&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;kafka_2.9.2&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;<span class="variable">$&#123;kafka.version&#125;</span>&lt;/version&gt;</span><br><span class="line">        &lt;scope&gt;compile&lt;/scope&gt;</span><br><span class="line">        &lt;exclusions&gt;</span><br><span class="line">          &lt;exclusion&gt;</span><br><span class="line">            &lt;artifactId&gt;jmxri&lt;/artifactId&gt;</span><br><span class="line">            &lt;groupId&gt;com.sun.jmx&lt;/groupId&gt;</span><br><span class="line">          &lt;/exclusion&gt;</span><br><span class="line">          &lt;exclusion&gt;</span><br><span class="line">            &lt;artifactId&gt;jms&lt;/artifactId&gt;</span><br><span class="line">            &lt;groupId&gt;javax.jms&lt;/groupId&gt;</span><br><span class="line">          &lt;/exclusion&gt;</span><br><span class="line">          &lt;exclusion&gt;</span><br><span class="line">            &lt;artifactId&gt;jmxtools&lt;/artifactId&gt;</span><br><span class="line">            &lt;groupId&gt;com.sun.jdmk&lt;/groupId&gt;</span><br><span class="line">            &lt;/exclusion&gt;</span><br><span class="line">          &lt;/exclusions&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/dependencies&gt;</span><br><span class="line"></span><br><span class="line">  &lt;build&gt;</span><br><span class="line"></span><br><span class="line">    &lt;plugins&gt;</span><br><span class="line"></span><br><span class="line">      &lt;plugin&gt;</span><br><span class="line">         &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br><span class="line">         &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;</span><br><span class="line">         &lt;version&gt;<span class="variable">$&#123;maven-compiler-plugin.version&#125;</span>&lt;/version&gt;</span><br><span class="line">         &lt;configuration&gt;</span><br><span class="line">           &lt;<span class="built_in">source</span>&gt;<span class="variable">$&#123;jdk.version&#125;</span>&lt;/<span class="built_in">source</span>&gt;</span><br><span class="line">           &lt;target&gt;<span class="variable">$&#123;jdk.version&#125;</span>&lt;/target&gt;</span><br><span class="line">         &lt;/configuration&gt;</span><br><span class="line">      &lt;/plugin&gt;</span><br><span class="line"></span><br><span class="line">      &lt;plugin&gt;</span><br><span class="line">         &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br><span class="line">         &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;</span><br><span class="line">         &lt;configuration&gt;</span><br><span class="line">           &lt;archive&gt;</span><br><span class="line">             &lt;manifest&gt;</span><br><span class="line">               &lt;mainClass&gt;com.yulartech.template.KafkaPublisher&lt;/mainClass&gt;</span><br><span class="line">             &lt;/manifest&gt;</span><br><span class="line">           &lt;/archive&gt;</span><br><span class="line">         &lt;/configuration&gt;</span><br><span class="line">      &lt;/plugin&gt;</span><br><span class="line"></span><br><span class="line">      &lt;plugin&gt;</span><br><span class="line">          &lt;groupId&gt;org.dstovall&lt;/groupId&gt;</span><br><span class="line">          &lt;artifactId&gt;onejar-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">          &lt;version&gt;<span class="variable">$&#123;onejar-maven-plugin.version&#125;</span>&lt;/version&gt;</span><br><span class="line">          &lt;executions&gt;</span><br><span class="line">            &lt;execution&gt;</span><br><span class="line">                &lt;goals&gt;</span><br><span class="line">                  &lt;goal&gt;one-jar&lt;/goal&gt;</span><br><span class="line">                &lt;/goals&gt;</span><br><span class="line">            &lt;/execution&gt;</span><br><span class="line">           &lt;/executions&gt;</span><br><span class="line">       &lt;/plugin&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/plugins&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/build&gt;</span><br><span class="line"></span><br><span class="line">  &lt;pluginRepositories&gt;</span><br><span class="line">    &lt;pluginRepository&gt;</span><br><span class="line">        &lt;id&gt;onejar-maven-plugin.googlecode.com&lt;/id&gt;</span><br><span class="line">        &lt;url&gt;http://onejar-maven-plugin.googlecode.com/svn/mavenrepo&lt;/url&gt;</span><br><span class="line">    &lt;/pluginRepository&gt;</span><br><span class="line">  &lt;/pluginRepositories&gt;</span><br><span class="line"></span><br><span class="line">&lt;/project&gt;</span><br></pre></td></tr></table></figure></p>
<hr>

<h3 id="Write-Java-Code"><a href="#Write-Java-Code" class="headerlink" title="Write Java Code"></a>Write Java Code</h3><p>Under this file path ./src/main/com/yulartech/template/, create a new java file called “KafkaPublisher.java”.</p>
<p>In the first step of our code, we should define properties for how the Producer finds the cluster, serializes the messages and if appropriate directs the message to a specific Partition.</p>
<p>Here is the example to define these properties:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Properties props = new Properties();</span><br><span class="line"> </span><br><span class="line">props.put(<span class="string">"metadata.broker.list"</span>, <span class="string">"localhost:9092,localhost:9093"</span>);</span><br><span class="line">props.put(<span class="string">"serializer.class"</span>, <span class="string">"kafka.serializer.StringEncoder"</span>);</span><br><span class="line">props.put(<span class="string">"partitioner.class"</span>, <span class="string">"com.yulartech.template.SimplePartitioner"</span>);</span><br><span class="line">props.put(<span class="string">"request.required.acks"</span>, <span class="string">"1"</span>);</span><br><span class="line"> </span><br><span class="line">ProducerConfig config = new ProducerConfig(props);</span><br></pre></td></tr></table></figure></p>
<p>Note that if we only want to run the jar on single broker, the “metadata.broker.list” should contain only one broker URL; otherwise, we should list all the broker URLs like the above example. Since we will put the jar file on the Kafka cluster, the host name of URL is localhost.</p>
<p>Below is the source code of KafkaPublisher.java:<br>This one is for single broker:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">package com.yulartech.template;</span><br><span class="line"></span><br><span class="line">import java.util.*;</span><br><span class="line"></span><br><span class="line">import kafka.javaapi.producer.Producer;</span><br><span class="line">import kafka.producer.KeyedMessage;</span><br><span class="line">import kafka.producer.ProducerConfig;</span><br><span class="line"></span><br><span class="line">public class KafkaPublisher</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    Producer&lt;String, String&gt; producer;</span><br><span class="line">    ProducerConfig config;</span><br><span class="line"></span><br><span class="line">    public <span class="function"><span class="title">KafkaPublisher</span></span>()&#123;</span><br><span class="line">	Properties props = new Properties();</span><br><span class="line">        props.put(<span class="string">"metadata.broker.list"</span>, <span class="string">"localhost:9092"</span>); //Single Publisher Version</span><br><span class="line">        props.put(<span class="string">"serializer.class"</span>, <span class="string">"kafka.serializer.StringEncoder"</span>);</span><br><span class="line">        props.put(<span class="string">"partitioner.class"</span>, <span class="string">"com.yulartech.template.SimplePartitioner"</span>);</span><br><span class="line">        props.put(<span class="string">"request.required.acks"</span>, <span class="string">"1"</span>);</span><br><span class="line"></span><br><span class="line">        config = new ProducerConfig(props);</span><br><span class="line">	producer = new Producer&lt;String, String&gt;(config);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void runPublisher(long events)&#123;</span><br><span class="line">	Random rnd = new Random();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (long nEvents = 0; nEvents &lt; events; nEvents++) &#123;</span><br><span class="line">               long runtime = new Date().getTime();</span><br><span class="line">               String ip = <span class="string">"192.168.2."</span> + rnd.nextInt(255);</span><br><span class="line">               String msg = runtime + <span class="string">",www.example.com,"</span> + ip;</span><br><span class="line">               KeyedMessage&lt;String, String&gt; data = new KeyedMessage&lt;String, String&gt;(<span class="string">"page_visits"</span>, ip, msg);</span><br><span class="line">               producer.send(data);</span><br><span class="line">        &#125;</span><br><span class="line">        producer.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    public static void main( String[] args )&#123;</span><br><span class="line"></span><br><span class="line">        long events = Long.parseLong(args[0]);</span><br><span class="line"></span><br><span class="line">	KafkaPublisher kafkaPublisher = new KafkaPublisher();</span><br><span class="line">	kafkaPublisher.runPublisher(events);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>This one is multi-brokers version:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">package com.yulartech.template;</span><br><span class="line"></span><br><span class="line">import java.util.*;</span><br><span class="line"></span><br><span class="line">import kafka.javaapi.producer.Producer;</span><br><span class="line">import kafka.producer.KeyedMessage;</span><br><span class="line">import kafka.producer.ProducerConfig;</span><br><span class="line"></span><br><span class="line">public class KafkaPublisher</span><br><span class="line">&#123;</span><br><span class="line">    public static void main( String[] args )</span><br><span class="line">    &#123;</span><br><span class="line">        long events = Long.parseLong(args[0]);</span><br><span class="line">        Random rnd = new Random();</span><br><span class="line"></span><br><span class="line">        Properties props = new Properties();</span><br><span class="line">	props.put(<span class="string">"metadata.broker.list"</span>, <span class="string">"localhost:9092,localhost:9093"</span>); //Multiple Publisher Vesion</span><br><span class="line">        props.put(<span class="string">"serializer.class"</span>, <span class="string">"kafka.serializer.StringEncoder"</span>);</span><br><span class="line">        props.put(<span class="string">"partitioner.class"</span>, <span class="string">"com.yulartech.template.SimplePartitioner"</span>);</span><br><span class="line">        props.put(<span class="string">"request.required.acks"</span>, <span class="string">"1"</span>);</span><br><span class="line"></span><br><span class="line">        ProducerConfig config = new ProducerConfig(props);</span><br><span class="line"></span><br><span class="line">        Producer&lt;String, String&gt; producer = new Producer&lt;String, String&gt;(config);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (long nEvents = 0; nEvents &lt; events; nEvents++) &#123;</span><br><span class="line"></span><br><span class="line">               long runtime = new Date().getTime();</span><br><span class="line">               String ip = <span class="string">"192.168.2."</span> + rnd.nextInt(255);</span><br><span class="line">               String msg = runtime + <span class="string">",www.example.com,"</span> + ip;</span><br><span class="line">               KeyedMessage&lt;String, String&gt; data = new KeyedMessage&lt;String, String&gt;(<span class="string">"page_visits"</span>, ip, msg);</span><br><span class="line">               producer.send(data);</span><br><span class="line">        &#125;</span><br><span class="line">        producer.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Then under the same file path, create another new java file “SimplePartitioner.java”.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package com.yulartech.template;</span><br><span class="line"></span><br><span class="line">import kafka.producer.Partitioner;</span><br><span class="line">import kafka.utils.VerifiableProperties;</span><br><span class="line"></span><br><span class="line">public class SimplePartitioner implements Partitioner &#123;</span><br><span class="line">    public SimplePartitioner (VerifiableProperties props) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int partition(Object key, int a_numPartitions) &#123;</span><br><span class="line">        int partition = 0;</span><br><span class="line">        String stringKey = (String) key;</span><br><span class="line">        int offset = stringKey.lastIndexOf(<span class="string">'.'</span>);</span><br><span class="line">        <span class="keyword">if</span> (offset &gt; 0) &#123;</span><br><span class="line">           partition = Integer.parseInt( stringKey.substring(offset+1)) % a_numPartitions;</span><br><span class="line">        &#125;</span><br><span class="line">       <span class="built_in">return</span> partition;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<hr>

<h3 id="Compile-Deploy-and-Run-the-Jar"><a href="#Compile-Deploy-and-Run-the-Jar" class="headerlink" title="Compile, Deploy and Run the Jar"></a>Compile, Deploy and Run the Jar</h3><p>Use these two commands to generate jar file:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mvn clean</span><br><span class="line">$ mvn package -DskipTests</span><br></pre></td></tr></table></figure></p>
<p>If no exceptions are thrown out, we will find a jar file under the new created ./target directory called “kafka-publisher-1.0-SNAPSHOT.one-jar.jar”, which is the jar file we want.</p>
<p>Then we should start our Kafka cluster, here is the <a href="http://yular.github.io/2015/09/04/Kafka-Install-and-Basic-Commands/">tutorial</a> and we will run mulit-brokers on it. Besides, we also run a consumer to receive the message published by our Kafka jar.</p>
<p>Execute this command when all the three brokers are running successfully:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 3 --partitions 5 --topic page_visits</span><br></pre></td></tr></table></figure></p>
<p>Now let us run our jar through this command:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar kafka-publisher-1.0-SNAPSHOT.one-jar.jar 9</span><br></pre></td></tr></table></figure></p>
<p>Note that the digit is the number of messages that will be sent.</p>
<p>So the output should be similar like this:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1452801130483,www.example.com,192.168.2.225</span><br><span class="line">1452801130781,www.example.com,192.168.2.37</span><br><span class="line">1452801130791,www.example.com,192.168.2.226</span><br><span class="line">1452801130805,www.example.com,192.168.2.106</span><br><span class="line">1452801130817,www.example.com,192.168.2.179</span><br><span class="line">1452801130829,www.example.com,192.168.2.191</span><br><span class="line">1452801130841,www.example.com,192.168.2.18</span><br><span class="line">1452801130847,www.example.com,192.168.2.42</span><br><span class="line">1452801130867,www.example.com,192.168.2.18</span><br></pre></td></tr></table></figure></p>
<p>Hope this tutorial will help.</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yular.github.io/2016/01/17/Kafka-Publisher-Java-Maven-QuickStart/" data-id="ck5ju04vh00e3olkp3uldkbw1" class="article-share-link" data-share="baidu" data-title="Kafka Publisher Java Maven QuickStart">分享到</a>
      

      
        <a href="http://yular.github.io/2016/01/17/Kafka-Publisher-Java-Maven-QuickStart/#ds-thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Cloud-Computing/">Cloud Computing</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Maven-Including-All-Dependencies-into-One-Jar-Using-Maven-Assemble-Plugins-Tutorial" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/10/Maven-Including-All-Dependencies-into-One-Jar-Using-Maven-Assemble-Plugins-Tutorial/" class="article-date">
  <time datetime="2016-01-10T04:22:04.000Z" itemprop="datePublished">2016-01-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/10/Maven-Including-All-Dependencies-into-One-Jar-Using-Maven-Assemble-Plugins-Tutorial/">Maven Including All Dependencies into One Jar Using Maven Assemble Plugins Tutorial</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yular.github.io/2016/01/10/Maven-Including-All-Dependencies-into-One-Jar-Using-Maven-Assemble-Plugins-Tutorial/" data-id="ck5ju04sc007lolkpbcceb90d" class="article-share-link" data-share="baidu" data-title="Maven Including All Dependencies into One Jar Using Maven Assemble Plugins Tutorial">分享到</a>
      

      
        <a href="http://yular.github.io/2016/01/10/Maven-Including-All-Dependencies-into-One-Jar-Using-Maven-Assemble-Plugins-Tutorial/#ds-thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/13/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="page-number" href="/page/13/">13</a><span class="page-number current">14</span><a class="page-number" href="/page/15/">15</a><a class="page-number" href="/page/16/">16</a><span class="space">&hellip;</span><a class="page-number" href="/page/24/">24</a><a class="extend next" rel="next" href="/page/15/">下一页 &raquo;</a>
  </nav>
</section>
      
      <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithm/">Algorithm</a><span class="tag-list-count">31</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bit-Manipulation/">Bit Manipulation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BitCoin/">BitCoin</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Business-Model/">Business Model</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C++</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cloud-Computing/">Cloud Computing</a><span class="tag-list-count">28</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Combinatorics/">Combinatorics</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Container/">Container</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Data-Analysis/">Data Analysis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Database/">Database</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Design-Pattern/">Design Pattern</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Finance/">Finance</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Graph-Theory/">Graph Theory</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IOS/">IOS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Interview-Summary/">Interview Summary</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a><span class="tag-list-count">37</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Javascript/">Javascript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kotlin/">Kotlin</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Life/">Life</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Life-Thoughts/">Life Thoughts</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Lua/">Lua</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mac/">Mac</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Machine-Learning/">Machine Learning</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Natural-Language-Processing/">Natural Language Processing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/R/">R</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/">Redis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ruby/">Ruby</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Software-Development/">Software Development</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SparkSQL/">SparkSQL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/String/">String</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/System-Design/">System Design</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Test/">Test</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tools/">Tools</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Web/">Web</a><span class="tag-list-count">17</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Algorithm/" style="font-size: 19.29px;">Algorithm</a> <a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/Bit-Manipulation/" style="font-size: 10px;">Bit Manipulation</a> <a href="/tags/BitCoin/" style="font-size: 10px;">BitCoin</a> <a href="/tags/Business-Model/" style="font-size: 10px;">Business Model</a> <a href="/tags/C/" style="font-size: 12.14px;">C</a> <a href="/tags/C/" style="font-size: 10.71px;">C++</a> <a href="/tags/Cloud-Computing/" style="font-size: 18.57px;">Cloud Computing</a> <a href="/tags/Combinatorics/" style="font-size: 10px;">Combinatorics</a> <a href="/tags/Container/" style="font-size: 10.71px;">Container</a> <a href="/tags/Data-Analysis/" style="font-size: 10px;">Data Analysis</a> <a href="/tags/Database/" style="font-size: 15.71px;">Database</a> <a href="/tags/Design-Pattern/" style="font-size: 11.43px;">Design Pattern</a> <a href="/tags/Finance/" style="font-size: 10px;">Finance</a> <a href="/tags/Graph-Theory/" style="font-size: 10px;">Graph Theory</a> <a href="/tags/IOS/" style="font-size: 10px;">IOS</a> <a href="/tags/Interview-Summary/" style="font-size: 10.71px;">Interview Summary</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Javascript/" style="font-size: 10px;">Javascript</a> <a href="/tags/Kotlin/" style="font-size: 10px;">Kotlin</a> <a href="/tags/Life/" style="font-size: 13.57px;">Life</a> <a href="/tags/Life-Thoughts/" style="font-size: 10px;">Life Thoughts</a> <a href="/tags/Linux/" style="font-size: 16.43px;">Linux</a> <a href="/tags/Lua/" style="font-size: 14.29px;">Lua</a> <a href="/tags/Mac/" style="font-size: 10px;">Mac</a> <a href="/tags/Machine-Learning/" style="font-size: 16.43px;">Machine Learning</a> <a href="/tags/Natural-Language-Processing/" style="font-size: 10px;">Natural Language Processing</a> <a href="/tags/Python/" style="font-size: 12.14px;">Python</a> <a href="/tags/R/" style="font-size: 10px;">R</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/Ruby/" style="font-size: 10.71px;">Ruby</a> <a href="/tags/Software-Development/" style="font-size: 17.14px;">Software Development</a> <a href="/tags/SparkSQL/" style="font-size: 10px;">SparkSQL</a> <a href="/tags/String/" style="font-size: 10px;">String</a> <a href="/tags/System-Design/" style="font-size: 15px;">System Design</a> <a href="/tags/Test/" style="font-size: 12.86px;">Test</a> <a href="/tags/Tools/" style="font-size: 12.14px;">Tools</a> <a href="/tags/Web/" style="font-size: 17.86px;">Web</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a><span class="archive-list-count">19</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a><span class="archive-list-count">20</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">February 2015</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">近期文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/11/19/Linux-Server-Trouble-Shooting-Commands/">Linux Server Trouble Shooting Commands and Tools</a>
          </li>
        
          <li>
            <a href="/2018/11/12/Docker-Image-QuickStart/">Docker Image QuickStart</a>
          </li>
        
          <li>
            <a href="/2018/05/10/Thinking-in-Ops-Readiness/">Thinking in Ops Readiness</a>
          </li>
        
          <li>
            <a href="/2018/03/12/BitCoin-Information-Summary/">BitCoin Information Summary</a>
          </li>
        
          <li>
            <a href="/2018/02/25/Reading-Note-of-Working-Effectively-with-Legacy-Code-IV/">Reading Note of Working Effectively with Legacy Code IV</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">友情链接</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="http://arvinxiang.com" target="_blank">主题作者</a>
          </li>
        
          <li>
            <a href="http://reqianduan.com" target="_blank">热前端</a>
          </li>
        
          <li>
            <a href="http://yuancheng.work" target="_blank">远程.work</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 BaiChuan Yang<br>
      Powered by <a href="//hexo.io/" target="_blank">Hexo</a>
      .
      Theme by <a href="https://github.com/xiangming/landscape-plus" target="_blank">Landscape-plus</a>
    </div>
  </div>
</footer>
  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
  <!-- totop start -->
<div id="totop">
<a title="返回顶部"><img src="/img/scrollup.png"/></a>
</div>

<!-- totop end -->

<!-- 多说公共js代码 start -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"reqianduan"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- 多说公共js代码 end -->


<!-- 百度分享 start -->

<div id="article-share-box" class="article-share-box">
  <div id="bdshare" class="bdsharebuttonbox article-share-links">
    <a class="article-share-weibo" data-cmd="tsina" title="分享到新浪微博"></a>
    <a class="article-share-weixin" data-cmd="weixin" title="分享到微信"></a>
    <a class="article-share-qq" data-cmd="sqq" title="分享到QQ"></a>
    <a class="article-share-renren" data-cmd="renren" title="分享到人人网"></a>
    <a class="article-share-more" data-cmd="more" title="更多"></a>
  </div>
</div>
<script>
  function SetShareData(cmd, config) {
    if (shareDataTitle && shareDataUrl) {
      config.bdText = shareDataTitle;
      config.bdUrl = shareDataUrl;
    }
    return config;
  }
  window._bd_share_config={
    "common":{onBeforeClick: SetShareData},
    "share":{"bdCustomStyle":"/css/bdshare.css"}
  };
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

<!-- 百度分享 end -->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>




<script src="/js/script.js"></script>

</div>
</body>
</html>
